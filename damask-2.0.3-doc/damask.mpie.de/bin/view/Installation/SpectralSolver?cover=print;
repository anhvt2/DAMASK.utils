<!DOCTYPE html><html lang="en">
<head>
<title> SpectralSolver &lt; Installation &lt; DAMASK</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.5, user-scalable=yes" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<link rel="icon" href="/pub/System/ProjectLogos/favicon-damask.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/pub/System/ProjectLogos/favicon-damask.ico" type="image/x-icon" />
<link rel="alternate" href="https://damask.mpie.de/bin/edit/Installation/SpectralSolver?t=1627660023" type="application/x-wiki" title="edit SpectralSolver" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" />
<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Installation/WebRss" />
<base href="https://damask.mpie.de/bin/view/Installation/SpectralSolver" /><!--[if IE]></base><![endif]-->
<link rel='stylesheet' href='/pub/System/PageOptimizerPlugin/cache/70be1b55d797051be90cd723a87f2c1d.css' class='CLASSIFICATIONPLUGIN::CSS JQUERYPLUGIN::COMMENT JQUERYPLUGIN::TABLESORTER SMILIESPLUGIN head' media='all' />
<style class='head EXTERNALLINKPLUGIN_CSS' type="text/css" media="all">
.externalLink a:link,
.externalLink a:visited,
.externalLink a:hover {
	background-image:url(/pub/System/ExternalLinkPlugin/diagonal.gif);
	background-repeat:no-repeat;
	background-position:right;
	padding-right:18px;
}
</style>

<style type="text/css" media="all">
		  /* Styles that are set using variables */
		  .patternWebIndicator,
		  .patternWebIndicator a {
					 background-color:none;
		  }
		  #patternTopBarContents { background-image:url(https://damask.mpie.de/pub/System/ProjectLogos/DAMASK.png); background-repeat:repeat-x;}

.patternBookView {
	border-color:#cdcdcd;
}
.patternPreviewPage #patternMain {
	/* uncomment to set the preview image */
	/*background-image:url("/pub/System/PreviewBackground/preview2bg.gif");*/
}
</style>

<script class='script JQUERYPLUGIN' src='/pub/System/JQueryPlugin/jquery-2.2.4.js'></script>
<script class='script JQUERYPLUGIN::BROWSER' src='/pub/System/JQueryPlugin/plugins/browser/jquery.browser.js?version=0.1.0'></script>
<script class='script JQUERYPLUGIN::MIGRATE' src='/pub/System/JQueryPlugin/plugins/migrate/jquery.migrate.js?version=3.2.1'></script>
<script class='script JQUERYPLUGIN::LIVEQUERY' src='/pub/System/JQueryPlugin/plugins/livequery/jquery.livequery.js?version=1.3.6'></script>
<script class='script JQUERYPLUGIN::FOSWIKI' src='/pub/System/JQueryPlugin/plugins/foswiki/jquery.foswiki.js?version=2.14'></script>
<script class='script JQUERYPLUGIN::COMMENT' src='/pub/System/CommentPlugin/comment.js?version=3.0'></script>
<script class='script JQUERYPLUGIN::FOSWIKI::PREFERENCES foswikiPreferences' type='text/json'>{
   "SCRIPTSUFFIX" : "",
   "SCRIPTURLPATHS" : {
      "view" : "/bin/view"
   },
   "USERSWEB" : "Main",
   "SKIN" : "damask,famfamfam,pattern",
   "USERNAME" : "guest",
   "SERVERTIME" : "30 Jul 2021 - 17:47",
   "SCRIPTURL" : "https://damask.mpie.de/bin",
   "WIKINAME" : "WikiGuest",
   "NAMEFILTER" : "[\\\\\\s*?~^$@%`\"'&|<:;>\\[\\]#\\x00-\\x1f]",
   "WIKIUSERNAME" : "Main.WikiGuest",
   "SCRIPTURLPATH" : "/bin",
   "PUBURLPATH" : "/pub",
   "TOPIC" : "SpectralSolver",
   "URLHOST" : "https://damask.mpie.de",
   "WEB" : "Installation",
   "SYSTEMWEB" : "System",
   "COOKIEREALM" : "",
   "PUBURL" : "https://damask.mpie.de/pub"
}
</script>
<script class='script JQUERYPLUGIN::UPLOADER::META foswikiPreferences' type='text/json'>{"TopicInteractionPlugin":{"attachFileSizeLimit":"262144","officeSuite":""}}</script>
<script class='script JQUERYPLUGIN::TABLESORTER' src='/pub/System/JQTablePlugin/jquery.tablesorter.js?version=2.0.3'></script>
<script class='script JQUERYPLUGIN::TABLESORTER' src='/pub/System/JQTablePlugin/tables.js?version=2.0.3'></script>
<script class='script JQTABLEPLUGIN::SORT' type='text/javascript'>
jQuery.extend(foswiki.preferences, {
  'JQTablePlugin.sort' : 'all'
});
</script>
<script class='script JQUERYPLUGIN::JEDITABLE' src='/pub/System/JEditableContrib/jquery.jeditable.js?version=06 Feb 2017'></script>
<script class='script JavascriptFiles/foswikiString' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiString.js"></script>
<script class='script JavascriptFiles/foswikiPref' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiPref.js"></script>
<script class='script JavascriptFiles/strikeone' type="text/javascript" src="/pub/System/JavascriptFiles/strikeone.js"></script>
<script class='script JavascriptFiles/foswikiForm' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiForm.js"></script>
<script class='script PatternSkin/pattern' type="text/javascript" src="/pub/System/PatternSkin/pattern.js"></script>

<link rel="stylesheet" href="https://damask.mpie.de/pub/x3dom-1.7.1/x3dom.css">
<script src="https://damask.mpie.de/pub/x3dom-1.7.1/x3dom.js"></script>
</head> 
<body class="foswikiNoJs patternViewPage patternPrintPage">
<span id="PageTop"></span><div class="foswikiPage"><div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter" class="clear">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="foswikiTopic"> <h1 id="A_4.3._Spectral_solver"> <A name="Section_4.3."></A>4.3.  Spectral solver </h1>
<span id="TableOfContents"></span>
<div class="foswikiToc" id="foswikiTOC"> <ul>
<li> <a href="?cover=print#Preamble"> Preamble </a>
</li> <li> <a href="?cover=print#Prerequisites"> Prerequisites </a> <ul>
<li> <a href="?cover=print#Installation_scripts"> Installation scripts </a>
</li></ul> 
</li> <li> <a href="?cover=print#Build_from_source_and_install"> Build from source and install </a> <ul>
<li> <a href="?cover=print#General_compiler_switches"> General compiler switches </a>
</li> <li> <a href="?cover=print#Advanced_make_options"> Advanced make options </a>
</li></ul> 
</li> <li> <a href="?cover=print#Pre_45configured_docker_image"> Pre-configured docker image </a>
</li></ul> 
</div>
<p></p>

<hr />
<h2 id="Preamble">  Preamble </h2>
This manual describes the installation on a Unix system.
For running a simulation after the installation, please refer to the <a href="/bin/view/Usage/SpectralSolver">spectral solver usage page</a>.
<p></p>

<hr />
<h2 id="Prerequisites">  Prerequisites </h2> <ul>
<li> <a href="/bin/view/Installation/Compiler">Fortran compiler</a> supporting Fortran 2008 standard
</li> <li> <a href="/bin/view/Installation/PETSc">PETSc</a> including <a href="/bin/view/Installation/FFTW">FFTW</a>
</li> <li> <span class='foswikiMaroonFG'><em>DAMASK</em>/CONFIG</span> reflecting your system settings
</li> <li> system variables set (done by calling <code><b>&gt;source <span class='foswikiMaroonFG'><em>DAMASK</em>/DAMASK_env.(sh/csh/zsh)</span></b></code> or <code><b>&gt;source <span class='foswikiMaroonFG'><em>DAMASK</em>/env/DAMASK.(sh/csh/zsh)</span></b></code> for the current development version</br>      IMPORTANT note: as you have not yet compiled the spectral solver at this point, the warnings about "Spectral Solver Not found!" and "Post Processing Not found!" are normal; follow below instructions, which will fix this behavior!)
</li></ul> 
<p></p>

<hr />
<h3 id="Installation_scripts">  Installation scripts </h3>
The following scripts install all relevant prerequisites
<p></p>
 <ul>
<li> <a href="https://damask.mpie.de/pub/Installation/SpectralSolver/prerequisites-MacOS-Catalina.sh">MacOS Catalina</a>
</li> <li> <a href="https://damask.mpie.de/pub/Installation/SpectralSolver/prerequisites-MacOS-HighSierra.sh">MacOS HighSierra</a>
</li></ul> 
<p></p>

<hr /> <span style="float: right;"><a class="foswikiCurrentTopicLink" href="#TableOfContents"><span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/parent_gray.png' width='16' height='16' alt='parent_gray' /></span></a></span>
<h2 id="Build_from_source_and_install">  Build from source and install </h2>
<p></p>

<pre>&gt; cd <em>DAMASK</em>
&gt; make spectral [<em>switch=value</em>] [<em>switch=value</em>] [...]
</pre>
<p></p>

<h3 id="General_compiler_switches">   General compiler switches </h3>
You can control your compilation with the following switches (default in <strong>bold</strong>):
<p></p>
 <ul>
<li> <em>OPTIMIZATION</em>: OFF, <strong>DEFENSIVE</strong>, AGGRESSIVE
</li> <li> <em>OPENMP</em>: <strong>TRUE</strong>, FALSE
</li> <li> <em>BUILD_TYPE</em>: <strong>RELEASE</strong>, SYNTAXONLY, DEBUG (future option)
</li></ul> 
<p></p>

The meaning of the <em>OPTIMIZATION</em> switches are as following:
<p></p>
 <ul>
<li> OFF: -O0
</li> <li> DEFENSIVE: -O2
</li> <li> AGGRESSIVE: -O3
</li></ul> 
<p></p>

Choose AGGRESSIVE only if you do not encounter any problems such as inconsistent solver results.
As far as we know, DEFENSIVE is always safe and already improves performance significantly compared to OFF.
Compilation with <em>OPTIMIZATION</em> = OFF is only recommended when compile time is a premium.
<p></p>

<h3 id="Advanced_make_options">   Advanced make options </h3>
The advanced make options allow to specify in combination with the general compiler switches the complete compile command.
The following commands are defined in the <span class='foswikiMaroonFG'>Makefile</span>:
<p></p>
 <ul>
<li> <em>BUILDCMD_PRE</em>       = arbitrary prefix
</li> <li> <em>BUILDCMD_POST</em>       = arbitrary suffix
</li></ul> 
<p></p>

If the compiling options are changed, remove all previously compiled objects with
<pre>&gt; cd <em>DAMASK</em>/code/
&gt; make clean
</pre>
<p></p>

<hr />
<h2 id="Pre_45configured_docker_image">  Pre-configured docker image </h2>
A pre-configured docker image is available at the docker hub.   For quick testing of the DAMASK spectral solver, use 
<p></p>

<pre>
&gt; docker pull kedokudo/damaskdocker:damask
</pre>
to pull this image to your local machine.
<p></p>

Once the image is downloaded to the local machine, start a container with this image by 
<pre>
&gt; docker run -it kedokudo/damaskdocker:damask /bin/bash
</pre>
<p></p>

Then navigate to the example folder to test out the basic functionality of the spectral solver with 
<pre>
&gt; cd examples/SpectralMethod/Polycrystal
&gt; DAMASK_spectral -l tensionX.load -g 20grains16x16x16.geom
</pre>
<p></p>

If you would like to use the pre-configured docker image to run some simulation, you can mount your local directory to the container during the launch time by
<pre>
&gt; docker run -v {YOUR_LOCAL_DIR}:/tmp -it kedokudo/damaskdocker:damask /bin/bash
</pre>
then you can navigate to the /tmp directory and start your simulation
<pre>
&gt; cd /tmp
&gt; DAMASK_spectral -l {YOUR_LOAD_FILE} -g {YOUR_GEOM_FILE}
</pre></div>
<p class='p'></p>

</div>
<div class="patternInfo">This topic: Installation<span class='foswikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/Installation/BVPsolvers">BVPsolvers</a><span class='foswikiSeparator'>&nbsp;&gt;&nbsp;</span>SpectralSolver <br />
Topic revision:  <span class='patternRevInfo'>04 Mar 2020, <a href="/bin/view/Main/MartinDiehl">MartinDiehl</a></span></div>
</div>
</div>
</div>
</div><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="patternWebBottomBar"><span class="foswikiRight"> <a href="http://foswiki.org/"><img src="/pub/System/ProjectLogos/foswiki-logo.svg" alt="This site is powered by Foswiki" title="This site is powered by Foswiki" width="130"/></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors. <br /> Ideas, requests, problems regarding DAMASK? <a href='mailto:damask@mpie.de?subject=DAMASK%20Feedback%20on%20Installation.SpectralSolver'>Send feedback</a><br />§ <a href="https://www.mpie.de/imprint" target="_blank">Imprint</a> § <a href="https://www.mpie.de/3392182/data-protection" target="_blank">Data Protection</a></div></div></div>
</div>
</div>
</div>
</div></body></html>