<!DOCTYPE html><html lang="en">
<head>
<title> SystemConfiguration &lt; Installation &lt; DAMASK</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.5, user-scalable=yes" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<link rel="icon" href="/pub/System/ProjectLogos/favicon-damask.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/pub/System/ProjectLogos/favicon-damask.ico" type="image/x-icon" />
<link rel="alternate" href="https://damask.mpie.de/bin/edit/Installation/SystemConfiguration?t=1627662423" type="application/x-wiki" title="edit SystemConfiguration" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" />
<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/Installation/WebRss" />
<base href="https://damask.mpie.de/bin/view/Installation/SystemConfiguration" /><!--[if IE]></base><![endif]-->
<link rel='stylesheet' href='/pub/System/PageOptimizerPlugin/cache/393e07b27afe7658afa39f1e5e82a2aa.css' class='CLASSIFICATIONPLUGIN::CSS JQUERYPLUGIN::COMMENT JQUERYPLUGIN::TABLESORTER SMILIESPLUGIN head' media='all' />

<style class='head EXTERNALLINKPLUGIN_CSS' type="text/css" media="all">
.externalLink a:link,
.externalLink a:visited,
.externalLink a:hover {
	background-image:url(/pub/System/ExternalLinkPlugin/diagonal.gif);
	background-repeat:no-repeat;
	background-position:right;
	padding-right:18px;
}
</style>

<style type="text/css" media="all">
		  /* Styles that are set using variables */
		  .patternWebIndicator,
		  .patternWebIndicator a {
					 background-color:none;
		  }
		  #patternTopBarContents { background-image:url(https://damask.mpie.de/pub/System/ProjectLogos/DAMASK.png); background-repeat:repeat-x;}

.patternBookView {
	border-color:#cdcdcd;
}
.patternPreviewPage #patternMain {
	/* uncomment to set the preview image */
	/*background-image:url("/pub/System/PreviewBackground/preview2bg.gif");*/
}
</style>

<script class='script JQUERYPLUGIN' src='/pub/System/JQueryPlugin/jquery-2.2.4.js'></script>
<script class='script JavascriptFiles/strikeone' type="text/javascript" src="/pub/System/JavascriptFiles/strikeone.js"></script>
<script class='script JQUERYPLUGIN::BROWSER' src='/pub/System/JQueryPlugin/plugins/browser/jquery.browser.js?version=0.1.0'></script>
<script class='script JQUERYPLUGIN::MIGRATE' src='/pub/System/JQueryPlugin/plugins/migrate/jquery.migrate.js?version=3.2.1'></script>
<script class='script JQUERYPLUGIN::LIVEQUERY' src='/pub/System/JQueryPlugin/plugins/livequery/jquery.livequery.js?version=1.3.6'></script>
<script class='script JQUERYPLUGIN::FOSWIKI' src='/pub/System/JQueryPlugin/plugins/foswiki/jquery.foswiki.js?version=2.14'></script>
<script class='script JQUERYPLUGIN::TABLESORTER' src='/pub/System/JQTablePlugin/jquery.tablesorter.js?version=2.0.3'></script>
<script class='script JQUERYPLUGIN::TABLESORTER' src='/pub/System/JQTablePlugin/tables.js?version=2.0.3'></script>
<script class='script JavascriptFiles/foswikiString' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiString.js"></script>
<script class='script JavascriptFiles/foswikiPref' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiPref.js"></script>
<script class='script JQUERYPLUGIN::JEDITABLE' src='/pub/System/JEditableContrib/jquery.jeditable.js?version=06 Feb 2017'></script>
<script class='script JavascriptFiles/foswikiForm' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiForm.js"></script>
<script class='script PatternSkin/pattern' type="text/javascript" src="/pub/System/PatternSkin/pattern.js"></script>
<script class='script JQUERYPLUGIN::FOSWIKI::PREFERENCES foswikiPreferences' type='text/json'>{
   "WIKINAME" : "WikiGuest",
   "URLHOST" : "https://damask.mpie.de",
   "SCRIPTURLPATHS" : {
      "view" : "/bin/view"
   },
   "PUBURL" : "https://damask.mpie.de/pub",
   "USERSWEB" : "Main",
   "COOKIEREALM" : "",
   "SCRIPTURLPATH" : "/bin",
   "SYSTEMWEB" : "System",
   "USERNAME" : "guest",
   "SKIN" : "damask,famfamfam,pattern",
   "SERVERTIME" : "30 Jul 2021 - 18:27",
   "WIKIUSERNAME" : "Main.WikiGuest",
   "WEB" : "Installation",
   "SCRIPTSUFFIX" : "",
   "TOPIC" : "SystemConfiguration",
   "NAMEFILTER" : "[\\\\\\s*?~^$@%`\"'&|<:;>\\[\\]#\\x00-\\x1f]",
   "SCRIPTURL" : "https://damask.mpie.de/bin",
   "PUBURLPATH" : "/pub"
}
</script>
<script class='script JQTABLEPLUGIN::SORT' type='text/javascript'>
jQuery.extend(foswiki.preferences, {
  'JQTablePlugin.sort' : 'all'
});
</script>
<script class='script JQUERYPLUGIN::COMMENT' src='/pub/System/CommentPlugin/comment.js?version=3.0'></script>
<script class='script JQUERYPLUGIN::UPLOADER::META foswikiPreferences' type='text/json'>{"TopicInteractionPlugin":{"officeSuite":"","attachFileSizeLimit":"262144"}}</script>

<link rel="stylesheet" href="https://damask.mpie.de/pub/x3dom-1.7.1/x3dom.css">
<script src="https://damask.mpie.de/pub/x3dom-1.7.1/x3dom.js"></script>
</head> 
<body class="foswikiNoJs patternViewPage patternPrintPage">
<span id="PageTop"></span><div class="foswikiPage"><div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter" class="clear">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="foswikiTopic"> <h1 id="A_2._System_configuration"> <A name="Section_2."></A>2.  System configuration </h1>
<span id="TableOfContents"></span>
<div class="foswikiToc" id="foswikiTOC"> <ul>
<li> <a href="?cover=print#Setting_DAMASK_options"> Setting DAMASK options </a>
</li> <li> <a href="?cover=print#Setting_shell_environment"> Setting shell environment </a> <ul>
<li> <a href="?cover=print#Result"> Result </a>
</li></ul> 
</li> <li> <a href="?cover=print#A_few_words_on_memory_limits"> A few words on memory limits </a>
</li></ul> 
</div>
<p></p>

<hr /> 
<span id="SettingOptions"></span>
<h2 id="Setting_DAMASK_options">  Setting DAMASK options </h2>
Adjust the settings in <span class='foswikiMaroonFG'><em>DAMASK</em>/CONFIG</span> using any text editor, the default values should work on most systems.
<p class='p'></p>

<hr /> <span style="float: right;"><a class="foswikiCurrentTopicLink" href="#TableOfContents"><span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/parent_gray.png' width='16' height='16' alt='parent_gray' /></span></a></span>
<h2 id="Setting_shell_environment">  Setting shell environment </h2>
<p></p>

Depending on your <span class='externalLink'><a href="https://en.wikipedia.org/wiki/Unix_shell">shell</a></span>, execute one of the following commands to set the DAMASK environment.
<p></p>
 <ul>
<li> in <span class='externalLink'><a href="http://de.wikipedia.org/wiki/Bash_(Shell)">bash</a></span> (default on most Linux systems):   <pre> &gt; source <em>DAMASK</em>/env/DAMASK.sh </pre>
</li></ul> 
<p></p>
 <ul>
<li> in the <span class='externalLink'><a href="http://en.wikipedia.org/wiki/C_shell">C-Shell</a></span>:   <pre> &gt; source <em>DAMASK</em>/env/DAMASK.csh </pre>
</li></ul> 
<p></p>
 <ul>
<li> in the <span class='externalLink'><a href="http://en.wikipedia.org/wiki/Z_shell">Z Shell</a></span>:   <pre> &gt; source <em>DAMASK</em>/env/DAMASK.zsh </pre>
</li></ul> 
<p></p>

Sourcing the file is necessary before compiling or running DAMASK, hence it is recommended to do it automatically when logging in.
This can be done by adding the source command to <span class='externalLink'><a href="http://www.unix.com/unix-for-dummies-questions-and-answers/35573-shell-initialization-files.html">shell initialization files</a></span> such as <span class='foswikiMaroonFG'>.bashrc</span> or <span class='foswikiMaroonFG'>.profile</span> located in your home directory.
<p></p>

<h3 id="Result">  Result </h3>
<p></p>

The script reports system environment settings in part derived from <span class='foswikiMaroonFG'><em>DAMASK</em>/CONFIG</span>.
Additionally, it <ul>
<li> exports the variable $DAMASK_NUM_THREADS according to the settings in <span class='foswikiMaroonFG'><em>DAMASK</em>/CONFIG</span>
</li> <li> adds <span class='foswikiMaroonFG'><em>DAMASK</em>/python</span> to $PYTHONPATH such that the <code>damask</code> module can be properly imported in Python
</li> <li> adds $DAMASK_BIN to $PATH if necessary and possible
</li> <li> sets the limits for stack, heap, virtual memory, and physical memory via <code>ulimit</code>
</li></ul> 
<p class='p'></p>

<p class='p'></p>

<hr /> <span style="float: right;"><a class="foswikiCurrentTopicLink" href="#TableOfContents"><span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/parent_gray.png' width='16' height='16' alt='parent_gray' /></span></a></span>
<h2 id="A_few_words_on_memory_limits">  A few words on memory limits </h2>
<p></p>

Please note: If you don't change the stack size, you might experience a stack overflow for large models, especially when using openMP.
<strong>Should your simulation terminate with a segmentation or memory fault at an early stage this is most likely the reason.</strong>
<p></p>

Increase the stack size by using the <code>ulimit</code> command in the parent shell. <ul>
<li> The easiest way would be to run   <pre>> ulimit -s unlimited</pre>   or   <pre>> ulimit -s hard</pre>   which sets the stack size to unlimited (Linux) or 64 <span class='externalLink'><a href="http://en.wikipedia.org/wiki/Mebibyte">MiB</a></span> (OS X).   If you want a different stack limit, you basically have to try what size is necessary for your model.
</li></ul> 
<p></p>
 <ul>
<li> Another option (for the spectral solver and Intel Fortran only) is to append   <pre>-Wl,-stack_size,<em>0x40000000</em></pre>   to the <em>COMPILE_OPTIONS</em> in <span class='foswikiMaroonFG'><em>DAMASK</em>/code/makefile</span> with <em>0x40000000</em> being an exemplary stack size of 1 <span class='externalLink'><a href="http://en.wikipedia.org/wiki/Gibibyte">GiB</a></span>.
</li></ul> 
<p></p>

Determining the optimal stack size is difficult.
A good start to read about it is <span class='externalLink'><a href="http://software.intel.com/en-us/forums/topic/501500">http://software.intel.com/en-us/forums/topic/501500</a></span>.</div>
<p class='p'></p>

</div>
<div class="patternInfo">This topic: Installation<span class='foswikiSeparator'>&nbsp;&gt;&nbsp;</span>SystemConfiguration <br />
Topic revision:  <span class='patternRevInfo'>16 Feb 2020, <a href="/bin/view/Main/PhilipEisenlohr">PhilipEisenlohr</a></span></div>
</div>
</div>
</div>
</div><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="patternWebBottomBar"><span class="foswikiRight"> <a href="http://foswiki.org/"><img src="/pub/System/ProjectLogos/foswiki-logo.svg" alt="This site is powered by Foswiki" title="This site is powered by Foswiki" width="130"/></a></span>Copyright by the contributing authors. All material on this collaboration platform is the property of the contributing authors. <br /> Ideas, requests, problems regarding DAMASK? <a href='mailto:damask@mpie.de?subject=DAMASK%20Feedback%20on%20Installation.SystemConfiguration'>Send feedback</a><br />ยง <a href="https://www.mpie.de/imprint" target="_blank">Imprint</a> ยง <a href="https://www.mpie.de/3392182/data-protection" target="_blank">Data Protection</a></div></div></div>
</div>
</div>
</div>
</div></body></html>