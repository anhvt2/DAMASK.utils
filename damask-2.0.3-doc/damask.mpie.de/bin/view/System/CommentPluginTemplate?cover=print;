<!DOCTYPE html><html lang="en">
<head>
<title> CommentPluginTemplate &lt; System &lt; DAMASK</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.5, user-scalable=yes" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<link rel="icon" href="/pub/System/ProjectLogos/favicon-damask.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/pub/System/ProjectLogos/favicon-damask.ico" type="image/x-icon" />
<link rel="alternate" href="https://damask.mpie.de/bin/edit/System/CommentPluginTemplate?t=1627671371" type="application/x-wiki" title="edit CommentPluginTemplate" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" />
<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/System/WebRss" />
<base href="https://damask.mpie.de/bin/view/System/CommentPluginTemplate" /><!--[if IE]></base><![endif]-->
<link rel='stylesheet' href='/pub/System/PageOptimizerPlugin/cache/cfd4c94f0438bb242fdb1b33ec599735.css' class='CLASSIFICATIONPLUGIN::CSS JQUERYPLUGIN::BOOKMAKER JQUERYPLUGIN::BUTTON JQUERYPLUGIN::COMMENT JQUERYPLUGIN::TABLESORTER SMILIESPLUGIN head' media='all' />

<style class='head EXTERNALLINKPLUGIN_CSS' type="text/css" media="all">
.externalLink a:link,
.externalLink a:visited,
.externalLink a:hover {
	background-image:url(/pub/System/ExternalLinkPlugin/diagonal.gif);
	background-repeat:no-repeat;
	background-position:right;
	padding-right:18px;
}
</style>

<style type="text/css" media="all">
		  /* Styles that are set using variables */
		  .patternWebIndicator,
		  .patternWebIndicator a {
					 background-color:none;
		  }
		  #patternTopBarContents { background-image:url(https://damask.mpie.de/pub/System/ProjectLogos/DAMASK.png); background-repeat:repeat-x;}

.patternBookView {
	border-color:#B9DAFF;
}
.patternPreviewPage #patternMain {
	/* uncomment to set the preview image */
	/*background-image:url("/pub/System/PreviewBackground/preview2bg.gif");*/
}
</style>

<script class='script JQUERYPLUGIN' src='/pub/System/JQueryPlugin/jquery-2.2.4.js'></script>
<script class='script JQUERYPLUGIN::BROWSER' src='/pub/System/JQueryPlugin/plugins/browser/jquery.browser.js?version=0.1.0'></script>
<script class='script JQUERYPLUGIN::MIGRATE' src='/pub/System/JQueryPlugin/plugins/migrate/jquery.migrate.js?version=3.2.1'></script>
<script class='script JQUERYPLUGIN::LIVEQUERY' src='/pub/System/JQueryPlugin/plugins/livequery/jquery.livequery.js?version=1.3.6'></script>
<script class='script JQUERYPLUGIN::FOSWIKI' src='/pub/System/JQueryPlugin/plugins/foswiki/jquery.foswiki.js?version=2.14'></script>
<script class='script JQUERYPLUGIN::COMMENT' src='/pub/System/CommentPlugin/comment.js?version=3.0'></script>
<script class='script JQUERYPLUGIN::METADATA' src='/pub/System/JQueryPlugin/plugins/metadata/jquery.metadata.js?version=2.1ef2bb44c86f5d0e98d55'></script>
<script class='script JQUERYPLUGIN::FOSWIKI::PREFERENCES foswikiPreferences' type='text/json'>{
   "COOKIEREALM" : "",
   "WEB" : "System",
   "PUBURLPATH" : "/pub",
   "SCRIPTURLPATHS" : {
      "view" : "/bin/view"
   },
   "NAMEFILTER" : "[\\\\\\s*?~^$@%`\"'&|<:;>\\[\\]#\\x00-\\x1f]",
   "USERSWEB" : "Main",
   "URLHOST" : "https://damask.mpie.de",
   "USERNAME" : "guest",
   "SCRIPTURL" : "https://damask.mpie.de/bin",
   "SKIN" : "damask,famfamfam,pattern",
   "SERVERTIME" : "30 Jul 2021 - 20:56",
   "WIKIUSERNAME" : "Main.WikiGuest",
   "SCRIPTSUFFIX" : "",
   "SYSTEMWEB" : "System",
   "TOPIC" : "CommentPluginTemplate",
   "PUBURL" : "https://damask.mpie.de/pub",
   "WIKINAME" : "WikiGuest",
   "SCRIPTURLPATH" : "/bin"
}
</script>
<script class='script JQTABLEPLUGIN::SORT' type='text/javascript'>
jQuery.extend(foswiki.preferences, {
  'JQTablePlugin.sort' : 'all'
});
</script>
<script class='script JavascriptFiles/strikeone' type="text/javascript" src="/pub/System/JavascriptFiles/strikeone.js"></script>
<script class='script JQUERYPLUGIN::BUTTON' src='/pub/System/JQueryPlugin/plugins/button/jquery.button.init.js?version=2.0'></script>
<script class='script JavascriptFiles/foswikiString' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiString.js"></script>
<script class='script JavascriptFiles/foswikiPref' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiPref.js"></script>
<script class='script JavascriptFiles/foswikiForm' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiForm.js"></script>
<script class='script PatternSkin/pattern' type="text/javascript" src="/pub/System/PatternSkin/pattern.js"></script>
<script class='script JQUERYPLUGIN::JEDITABLE' src='/pub/System/JEditableContrib/jquery.jeditable.js?version=06 Feb 2017'></script>
<script class='script JQUERYPLUGIN::UPLOADER::META foswikiPreferences' type='text/json'>{"TopicInteractionPlugin":{"attachFileSizeLimit":"262144","officeSuite":""}}</script>
<script class='script JQUERYPLUGIN::TABLESORTER' src='/pub/System/JQTablePlugin/jquery.tablesorter.js?version=2.0.3'></script>
<script class='script JQUERYPLUGIN::TABLESORTER' src='/pub/System/JQTablePlugin/tables.js?version=2.0.3'></script>
<script class='script JQUERYPLUGIN::BOOKMAKER' src='/pub/System/BookmakerPlugin/bookmaker.js?version=1.1.0'></script>

<link rel="stylesheet" href="https://damask.mpie.de/pub/x3dom-1.7.1/x3dom.css">
<script src="https://damask.mpie.de/pub/x3dom-1.7.1/x3dom.js"></script>
</head> 
<body class="foswikiNoJs patternViewPage patternPrintPage"><div id="bookmaker">
  <img src='/pub/System/FamFamFamSilkIcons/book_open.png' class='foswikiIcon jqIcon book_open'  alt='book_open' /> Bookmaker for <a href="/bin/view/Sandbox/ExampleBook">ExampleBook</a>
  <table width="100%" cellpadding="0" cellspacing="0" style="min-height: 25px">
	 <tr>
		<td align="left" width="5%">
	<a id='bookmaker_change' class='jqButton ' href='#' title='Open a different book' ><span class='jqButtonText'>Change book</span></a>
	<div id="new_book" style="display:none">
	  <form method="POST" action="/bin/view/System/CommentPluginTemplate" onsubmit="StrikeOne.submit(this)"><input type='hidden' name='validation_key' value='?2ff6943a4d942218c7169e3344f831b9' />
	    <input type="text" id="book_title" name="open_bookmaker" title="Enter the web.topic name of the book topic, and hit Enter" value="Sandbox.ExampleBook" />
	  </form>
	</div>
		 </td>
		<td align="left">
	<a id='bookmaker_close' class='jqButton ' href='/bin/view/System/CommentPluginTemplate?close_bookmaker=1' title='Close the bookmaker interface' ><span class='jqButtonText'>Close bookmaker</span></a>
		</td>
		<td align="right">
	<form method="POST" onsubmit="StrikeOne.submit(this)"><input type='hidden' name='validation_key' value='?4803eb6ad54cc6b2d6795abfbb44cfdf' />
	  <a id='bookmaker_add_button' class='jqButton bookmaker_button bookmaker_action bookmaker_active' href='https://damask.mpie.de/bin/rest/BookmakerPlugin/add?topic=System.CommentPluginTemplate' title='Add the current topic to the book' ><span class='jqButtonText'>Add to book</span></a>
	  <a id='bookmaker_remove_button' class='jqButton bookmaker_button bookmaker_action ' href='https://damask.mpie.de/bin/rest/BookmakerPlugin/remove?topic=System.CommentPluginTemplate' title='Remove the current topic from the book' ><span class='jqButtonText'>Remove from book</span></a>
	</form>
		</td>
		<td>
	<form method="GET">
	  <a class="bookmaker_button" id="bookmaker_expand" href="https://damask.mpie.de/bin/rest/BookmakerPlugin/list" title="Click to expand the book">
	  <img src='/pub/System/FamFamFamSilkIcons/application_side_expand.png' class='foswikiIcon jqIcon application_side_expand'  alt='application_side_expand' /></a>
	</form>
		</td>
	 </tr>
  </table>
  <div id="bookmaker_more">
	 <em>You can change the order/nesting of topics using drag and drop</em> <br />
	 <a id="bookmaker_contract"><img src='/pub/System/FamFamFamSilkIcons/application_side_contract.png' class='foswikiIcon jqIcon application_side_contract'  alt='application_side_contract' /></a>
	 <div id="book_tree">
	 </div>
  </div>
</div>
<span id="PageTop"></span><div class="foswikiPage"><div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter" class="clear">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="foswikiTopic"> 
<h1 id="Templates_for_CommentPlugin">  Templates for <a href="/bin/view/System/CommentPlugin">CommentPlugin</a> </h1>
<p></p>

See <a href="/bin/view/System/CommentPlugin#Customisation">CommentPlugin: Customisation</a> for help.
<p></p>

While this topic can be viewed as a topic, it is used by the <a href="/bin/view/System/CommentPlugin">CommentPlugin</a> as a template file. The syntax is the same as used for the templates used for presentation in skins - see <a href="/bin/view/System/SkinTemplates">SkinTemplates</a>. The important content in here is in the verbatim blocks. The rest of the topic is just comments.
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See <a href="/bin/view/Sandbox/CommentPluginExamples">CommentPluginExamples</a> to view rendered templates
<p></p>

<div class="foswikiBroadcastMessage" style="background-color:#ffc;">WARNING: THIS FILE WILL BE OVERWRITTEN WHEN YOU UPGRADE THE COMMENT PLUGIN</div>
<p></p>

Put your local templates into <a class="foswikiNewLink" href="/bin/edit/System/UserCommentsTemplate?topicparent=System.CommentPluginTemplate" rel="nofollow" title="Create this topic">UserCommentsTemplate</a> (create if it does not exist yet). <strong>Local templates defined in that topic will override templates defined below.</strong>
<p></p>

CommentPlugin can work in two modes, <em>refresh</em> and <em>ajax</em>. In refresh mode,
the entire topic is refreshed whenever a comment is added. This is rather slow,
but gives the most accurate results. In <em>ajax</em> mode, insertion of comments is
handled by Javascript in the browser, but what the user sees after adding
a comment is not necessarily identical to what they will see when the topic is
refreshed.
<p class='p'>The templates below all use ajax mode for best performance by default.
The plugin will fall back to refresh mode if Javascript is not available
(e.g. it is enabled in your user's browsers).</p>

If you want to disable ajax completely, then override the following template
<pre>
&#37;TMPL:DEF{ajax}&#37;commentPluginAjax&#37;TMPL:END&#37;
</pre>
setting it to empty.
<p></p>

<div class="foswikiToc" id="foswikiTOC"><span class="foswikiTocTitle">Table of Contents</span> <ul>
<li> <a href="?cover=print#Template_definitions"> Template definitions </a> <ul>
<li> <a href="?cover=print#Templates_used_in_rest_of_file"> Templates used in rest of file </a>
</li> <li> <a href="?cover=print#User_templates"> User templates </a> <ul>
<li> <a href="?cover=print#top"> top </a>
</li> <li> <a href="?cover=print#bottom"> bottom </a>
</li> <li> <a href="?cover=print#above"> above </a>
</li> <li> <a href="?cover=print#bulletabove"> bulletabove </a>
</li> <li> <a href="?cover=print#threadmode"> threadmode </a>
</li> <li> <a href="?cover=print#belowthreadmode"> belowthreadmode </a>
</li> <li> <a href="?cover=print#below"> below </a>
</li> <li> <a href="?cover=print#tableprepend"> tableprepend </a>
</li> <li> <a href="?cover=print#tableappend"> tableappend </a>
</li> <li> <a href="?cover=print#after:_Add_before_the_comment_box_44_after_the_last_comment"> after: Add before the comment box, after the last comment </a>
</li> <li> <a href="?cover=print#action"> action </a>
</li> <li> <a href="?cover=print#table"> table </a>
</li> <li> <a href="?cover=print#toctalk"> toctalk </a>
</li> <li> <a href="?cover=print#bookmark"> bookmark </a>
</li> <li> <a href="?cover=print#return"> return </a>
</li></ul> 
</li></ul> 
</li> <li> <a href="?cover=print#Include_UserComments"> Include UserComments </a>
</li></ul> 
</div>
<p></p>

<h2 id="Template_definitions">  Template definitions </h2>
<p></p>

<img src="/pub/System/DocumentGraphics/warning.png" alt="ALERT!" title="ALERT!" width="16" height="16" /> Note that the use of URLPARAM in the templates should be done in a way that prevents Cross Site Scripting attacks. The safest is to let URLPARAM encode the unsafe characters (default) but this prevents the user from entering Foswiki macros in the comment input fields. It is however safe to use encode="off" when the following rules are observed. <ul>
<li> The encode="off" option for URLPARAM is only used in this topic within verbatim tags to prevent this topic from being an XSS attack vector.
</li> <li> The encode="off" option is only used in OUTPUT defs and never in the PROMPT.
</li> <li> The encode="off" should never be used for guest comments.  The comment plugin will expand the <code>$encodeguest</code> token to "off" for logged in users and "entity" for guests.
</li></ul> 
<p></p>

<h3 id="Templates_used_in_rest_of_file">  Templates used in rest of file </h3>
<p></p>

Generic prompt box used by other templates
<pre>
&#37;TMPL:DEF{promptbox}&#37;&#60;div class&#61;&#34;commentPlugin commentPluginPromptBox&#34;&#62;&#60;table border&#61;&#34;0&#34; cellpadding&#61;&#34;0&#34; cellspacing&#61;&#34;0&#34;&#62;&#60;tr valign&#61;&#34;middle&#34;&#62;&#60;td&#62;&#60;textarea &#37;DISABLED&#37; rows&#61;&#34;&#37;rows&#124;3&#37;&#34; cols&#61;&#34;&#37;cols&#124;70&#37;&#34; name&#61;&#34;comment&#34; class&#61;&#34;foswikiInputField commentPluginPromptBox&#34; title&#61;&#34;&#37;MESSAGE&#37;&#34;&#62;&#37;MESSAGE&#37;&#60;/textarea&#62;&#60;/td&#62;&#60;td&#62;&#38;nbsp;&#60;input &#37;DISABLED&#37; type&#61;&#34;submit&#34; value&#61;&#34;&#37;button&#124;Add comment&#37;&#34; class&#61;&#34;foswikiButton &#37;TMPL:P{ajax}&#37;&#34; /&#62;&#60;/td&#62;&#60;/tr&#62;&#60;/table&#62;&#60;/div&#62;&#60;!--/commentPlugin--&#62;&#37;TMPL:END&#37;
</pre>
<p></p>

Short comment, signed and dated
<pre>
&#37;TMPL:DEF{outputoneliner}&#37;   &#42; &#37;URLPARAM{&#34;comment&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37; -- &#37;WIKIUSERNAME&#37; - &#37;GMTIME{&#34;&#36;day &#36;month &#36;year&#34;}&#37;&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#Default">Default</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h3 id="User_templates">  User templates </h3>
<h4 id="top">  top </h4>
Comments, signed and dated, added at top of file
<pre>
&#37;TMPL:DEF{PROMPT:top}&#37;&#37;TMPL:P{promptbox}&#37;&#37;TMPL:END&#37;
</pre>
<p></p>

<pre>
&#37;TMPL:DEF{OUTPUT:top}&#37;&#37;TMPL:P{outputoneliner}&#37;&#37;POS:TOP&#37;
&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#top">top</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="bottom">  bottom </h4>
Comments, signed and dated, added at end of file
<pre>
&#37;TMPL:DEF{PROMPT:bottom}&#37;&#37;TMPL:P{promptbox}&#37;&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:bottom}&#37;&#37;POS:BOTTOM&#37;&#37;TMPL:P{outputoneliner}&#37;&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#bottom">bottom</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="above">  above </h4>
Comments, signed and dated, added immediately before anchor
<pre>
&#37;TMPL:DEF{PROMPT:above}&#37;&#37;TMPL:P{promptbox}&#37;&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:above}&#37;&#37;POS:BEFORE&#37;&#37;TMPL:P{OUTPUT:threadmode}&#37;&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#above">above</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="bulletabove">  bulletabove </h4>
Bullet item added immediately before anchor. The input field width is passed with parameter <code>inputsize</code>, for example:
<p></p>

<pre>
&#37;COMMENT{type&#61;&#34;bulletabove&#34; inputsize&#61;&#34;20&#34;}&#37;
</pre>
<p></p>

<pre>
&#37;TMPL:DEF{PROMPT:bulletabove}&#37;&#60;input class&#61;&#34;foswikiInputField&#34; name&#61;&#34;bullet&#95;above&#95;item&#34; id&#61;&#34;bullet&#95;above&#95;item&#34; type&#61;&#34;text&#34; size&#61;&#34;&#37;inputsize&#124;40&#37;&#34; value&#61;&#34;&#37;URLPARAM{&#34;bullet&#95;above&#95;item&#34;}&#37;&#34; /&#62;&#38;nbsp;&#60;input &#37;DISABLED&#37; type&#61;&#34;button&#34; value&#61;&#34;&#37;button&#124;Add item&#37;&#34; class&#61;&#34;foswikiButton &#37;TMPL:P{ajax}&#37;&#34; /&#62;&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:bulletabove}&#37;   &#42; &#37;URLPARAM{&#34;bullet&#95;above&#95;item&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37;&#37;POS:BEFORE&#37;
&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#bulletabove">bulletabove</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="threadmode">  threadmode </h4>
Wiki thread mode comment, signed and dated
<pre>
&#37;TMPL:DEF{PROMPT:threadmode}&#37;&#37;TMPL:P{promptbox}&#37;&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:threadmode}&#37;&#37;POS:BEFORE&#37;

&#37;URLPARAM{&#34;comment&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37;

-- &#37;WIKIUSERNAME&#37; - &#37;DATE&#37;
&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#threadmode">threadmode</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="belowthreadmode">  belowthreadmode </h4>
Comments, signed and dated, added recurse after comment box.
<p></p>

<pre>
&#37;TMPL:DEF{PROMPT:belowthreadmode}&#37;&#37;TMPL:P{promptbox}&#37;&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:belowthreadmode}&#37;&#37;POS:AFTER&#37;
---++++ &#37;WIKIUSERNAME&#37; - &#37;SERVERTIME&#37;

&#37;URLPARAM{&#34;comment&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37;

&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#belowthreadmode">belowthreadmode</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="below">  below </h4>
Comments, signed and dated, added immediately below anchor
<pre>
&#37;TMPL:DEF{PROMPT:below}&#37;&#37;TMPL:P{promptbox}&#37;&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:below}&#37;&#37;POS:AFTER&#37;&#37;TMPL:P{outputoneliner}&#37;
&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#below">below</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="tableprepend">  tableprepend </h4>
Comments, signed and dated, added at top of table below the
anchor/location/COMMENT
<pre>
&#37;TMPL:DEF{PROMPT:tableprepend}&#37;&#37;TMPL:P{promptbox}&#37;&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:tableprepend}&#37;&#37;POS:AFTER&#37;&#124; &#37;URLPARAM{&#34;comment&#34; newline&#61;&#34;&#60;br /&#62;&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37; &#124; &#37;WIKIUSERNAME&#37; &#124; &#37;SERVERTIME&#37; &#124;
&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#tableprepend">tableprepend</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="tableappend">  tableappend </h4>
Comments, signed and dated, added at end of table above the anchor/location/COMMENT
<pre>
&#37;TMPL:DEF{PROMPT:tableappend}&#37;&#37;TMPL:P{promptbox}&#37;&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:tableappend}&#37;&#37;POS:BEFORE&#37;&#124; &#37;URLPARAM{&#34;comment&#34; newline&#61;&#34;&#60;br /&#62;&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37; &#124; &#37;WIKIUSERNAME&#37; &#124; &#37;SERVERTIME&#37; &#124;
&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#tableappend">tableappend</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="after:_Add_before_the_comment_box_44_after_the_last_comment">  after: Add before the comment box, after the last comment </h4>
<pre>
&#37;TMPL:DEF{PROMPT:after}&#37;&#37;TMPL:P{promptbox}&#37;&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:after}&#37;&#37;NOP&#37;&#37;TMPL:P{outputoneliner}&#37;
&#37;POS:BEFORE&#37;&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#after">after</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="action">  action </h4>
Action added to action table directly above comment box
(requires <a class="interwikiLink" href="https://foswiki.org/Extensions/ActionTrackerPlugin" title="'Extensions/ActionTrackerPlugin' on foswiki.org">Foswiki:Extensions/ActionTrackerPlugin</a>)
<pre>
&#37;TMPL:DEF{PROMPT:action}&#37;

&#37;TABLE{databg&#61;&#34;#ffffff&#34; tableborder&#61;&#34;0&#34; cellborder&#61;&#34;0&#34;}&#37;
&#124;        &#60;label for&#61;&#34;action&#95;who&#34;&#62;Action for&#60;/label&#62;&#124; &#60;input class&#61;&#34;foswikiInputField&#34; name&#61;&#34;action&#95;who&#34; id&#61;&#34;action&#95;who&#34; type&#61;&#34;text&#34; size&#61;&#34;50&#34; value&#61;&#34;&#37;URLPARAM{&#34;who&#34;}&#37;&#34; /&#62; &#124;
&#124; &#60;label for&#61;&#34;action&#95;due&#34;&#62;Due date&#60;/label&#62;&#124; &#60;input class&#61;&#34;foswikiInputField&#34; name&#61;&#34;action&#95;due&#34; id&#61;&#34;action&#95;due&#34; type&#61;&#34;text&#34; size&#61;&#34;30&#34; value&#61;&#34;&#37;URLPARAM{&#34;due&#34;}&#37;&#34; /&#62; &#124;
&#124;    &#60;label for&#61;&#34;action&#95;comment&#34;&#62;Comment&#60;/label&#62;&#124; &#60;textarea &#37;DISABLED&#37; rows&#61;&#34;&#37;rows&#124;3&#37;&#34; cols&#61;&#34;&#37;cols&#124;50&#37;&#34; name&#61;&#34;action&#95;comment&#34; id&#61;&#34;action&#95;comment&#34; class&#61;&#34;foswikiInputField commentPluginPromptBox&#34; onfocus&#61;&#34;if(this.value&#61;&#61;&#39;&#37;MESSAGE&#37;&#39;)this.value&#61;&#39;&#39;&#34; onblur&#61;&#34;if(this.value&#61;&#61;&#39;&#39;)this.value&#61;&#39;&#37;MESSAGE&#37;&#39;&#34;&#62;&#37;MESSAGE&#37;&#60;/textarea&#62; &#124;
&#124;&#124; &#60;input &#37;DISABLED&#37; type&#61;&#34;button&#34; class&#61;&#34;foswikiButton &#37;TMPL:P{ajax}&#37;&#34; value&#61;&#34;Add action&#34; /&#62; &#124;
&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:action}&#37;&#37;POS:BEFORE&#37;&#37;AC&#37;NOP&#37;TION{who&#61;&#34;&#37;URLPARAM{&#34;action&#95;who&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37;&#34; due&#61;&#34;&#37;URLPARAM{&#34;action&#95;due&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37;&#34;}&#37; &#37;URLPARAM{&#34;action&#95;comment&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37;&#60;br /&#62;- Created by &#37;WIKIUSERNAME&#37;, &#37;SERVERTIME&#37;&#37;ENDACTION&#37;
&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#action">action</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="table">  table </h4>
Tablerows adding on end
<pre>
&#37;TMPL:DEF{PROMPT:table}&#37;
&#37;TABLE{databg&#61;&#34;#ffffff&#34; tableborder&#61;&#34;0&#34; cellborder&#61;&#34;0&#34;}&#37;
&#124;        &#60;label for&#61;&#34;comment&#95;date&#34;&#62;Date&#60;/label&#62;&#124; &#60;input class&#61;&#34;foswikiInputField&#34; &#37;DISABLED&#37; type&#61;&#34;text&#34; size&#61;&#34;40&#34; name&#61;&#34;comment&#95;date&#34; id&#61;&#34;comment&#95;date&#34; /&#62; &#124;
&#124;        &#60;label for&#61;&#34;comment&#95;city&#34;&#62;City&#60;/label&#62;&#124; &#60;input class&#61;&#34;foswikiInputField&#34; &#37;DISABLED&#37; type&#61;&#34;text&#34; size&#61;&#34;40&#34; name&#61;&#34;comment&#95;city&#34; id&#61;&#34;comment&#95;city&#34; value&#61;&#34;&#34; /&#62; &#124;
&#124;&#124; &#60;input &#37;DISABLED&#37; type&#61;&#34;button&#34; class&#61;&#34;foswikiButton &#37;TMPL:P{ajax}&#37;&#34; value&#61;&#34;&#37;button&#124;Add entry&#37;&#34; /&#62; &#124;
&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:table}&#37;&#37;POS:BEFORE&#37;&#124; &#37;URLPARAM{&#34;comment&#95;date&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37; &#124; &#37;WIKIUSERNAME&#37; &#124; &#37;URLPARAM{&#34;comment&#95;city&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37; &#124;
&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#table">table</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="toctalk">  toctalk </h4>
Talk using TOC adding on end
<pre>
&#37;TMPL:DEF{PROMPT:toctalk}&#37;
&#37;TABLE{databg&#61;&#34;#ffffff&#34; tableborder&#61;&#34;0&#34; cellborder&#61;&#34;0&#34;}&#37;
&#124;        &#60;label for&#61;&#34;comment&#95;summary&#34;&#62;Summary&#60;/label&#62;&#124; &#60;input class&#61;&#34;foswikiInputField&#34; &#37;DISABLED&#37; type&#61;&#34;text&#34; size&#61;&#34;40&#34; name&#61;&#34;comment&#95;summary&#34; id&#61;&#34;comment&#95;summary&#34; /&#62; &#124;
&#124;        &#60;label for&#61;&#34;toctalk&#95;comment&#95;text&#34;&#62;Message&#60;/label&#62;&#124; &#60;textarea &#37;DISABLED&#37; rows&#61;&#34;&#37;rows&#124;3&#37;&#34; cols&#61;&#34;&#37;cols&#124;50&#37;&#34; name&#61;&#34;toctalk&#95;comment&#95;text&#34; id&#61;&#34;toctalk&#95;comment&#95;text&#34; class&#61;&#34;foswikiInputField commentPluginPromptBox&#34; onfocus&#61;&#34;if(this.value&#61;&#61;&#39;&#37;MESSAGE&#37;&#39;)this.value&#61;&#39;&#39;&#34; onblur&#61;&#34;if(this.value&#61;&#61;&#39;&#39;)this.value&#61;&#39;&#37;MESSAGE&#37;&#39;&#34;&#62;&#37;MESSAGE&#37;&#60;/textarea&#62; &#124;
&#124;&#124; &#60;input &#37;DISABLED&#37; type&#61;&#34;button&#34; value&#61;&#34;&#37;button&#124;Add&#37;&#34; class&#61;&#34;foswikiButton &#37;TMPL:P{ajax}&#37;&#34; /&#62; &#124;
&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:toctalk}&#37;
&#37;POS:BEFORE&#37;---++++ &#37;SERVERTIME&#37; &#37;WIKIUSERNAME&#37;: &#37;URLPARAM{&#34;comment&#95;summary&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37;
&#37;POS:BEFORE&#37;&#37;URLPARAM{&#34;toctalk&#95;comment&#95;text&#34; encode&#61;&#34;&#36;encodeguest&#34;}&#37;
&#37;POS:BEFORE&#37;
&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#toctalk">toctalk</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="bookmark">  bookmark </h4>
Create a list of annotated bookmarks
<pre>
&#37;TMPL:DEF{PROMPT:bookmark}&#37;
&#37;TABLE{databg&#61;&#34;#ffffff&#34; tableborder&#61;&#34;0&#34; cellborder&#61;&#34;0&#34;}&#37;
&#124;        &#60;label for&#61;&#34;comment&#95;url&#34;&#62;Url&#60;/label&#62;&#124; &#60;input class&#61;&#34;foswikiInputField&#34; &#37;DISABLED&#37; type&#61;&#34;text&#34; size&#61;&#34;40&#34; name&#61;&#34;comment&#95;url&#34; id&#61;&#34;comment&#95;url&#34; value&#61;&#34;http://&#34; /&#62; &#124;
&#124; &#60;label for&#61;&#34;comment&#95;link&#34;&#62;Link label&#60;/label&#62;&#124; &#60;input class&#61;&#34;foswikiInputField&#34; &#37;DISABLED&#37; type&#61;&#34;text&#34; size&#61;&#34;40&#34; name&#61;&#34;comment&#95;link&#34; id&#61;&#34;comment&#95;link&#34; /&#62; &#124;
&#124;    &#60;label for&#61;&#34;bookmark&#95;comment&#95;text&#34;&#62;Comment&#60;/label&#62;&#124; &#60;input class&#61;&#34;foswikiInputField&#34; &#37;DISABLED&#37; type&#61;&#34;text&#34; size&#61;&#34;40&#34; name&#61;&#34;bookmark&#95;comment&#95;text&#34; id&#61;&#34;bookmark&#95;comment&#95;text&#34; value&#61;&#34;&#37;MESSAGE&#37;&#34; /&#62; &#124;
&#124;&#124; &#60;input &#37;DISABLED&#37; type&#61;&#34;button&#34; value&#61;&#34;&#37;button&#124;Add bookmark&#37;&#34; class&#61;&#34;foswikiButton &#37;TMPL:P{ajax}&#37;&#34; /&#62; &#124;
&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:bookmark}&#37;&#37;POS:BEFORE&#37;   &#42; &#91;&#91;&#37;URLPARAM{&#34;comment&#95;url&#34; encode&#61;&#34;entity&#34;}&#37;&#93;&#91;&#37;URLPARAM{&#34;comment&#95;link&#34; encode&#61;&#34;entity&#34;}&#37;&#93;&#93; &#37;IF{&#34; &#39;&#37;URLPARAM{&#34;bookmark&#95;comment&#95;text&#34; encode&#61;&#34;entity&#34;}&#37;&#39; &#61; &#39;&#39; &#34; then&#61;&#34;&#34; else&#61;&#34;- &#34;}&#37;&#37;URLPARAM{&#34;bookmark&#95;comment&#95;text&#34; encode&#61;&#34;entity&#34;}&#37;
&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#bookmark">bookmark</a>
<p class='p'></p>

<p class='p'></p>

<p class='p'></p>

<h4 id="return">  return </h4>
Post to a different topic and return to here. The comment <code>target</code> is set in the <code>PROMPT</code>. In the form below the <code>redirectto</code> is set to the current (including) topic.
<p></p>

<pre>
&#37;TMPL:DEF{returnpromptbox}&#37;
&#60;input type&#61;&#34;hidden&#34; name&#61;&#34;redirectto&#34; value&#61;&#34;&#37;BASEWEB&#37;.&#37;BASETOPIC&#37;&#34; /&#62;
&#37;TMPL:P{promptbox}&#37;
&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{PROMPT:return}&#37;&#37;TMPL:P{return&#95;promptbox}&#37;&#37;TMPL:END&#37;
</pre>
<pre>
&#37;TMPL:DEF{OUTPUT:return}&#37;&#37;POS:BEFORE&#37;&#37;TMPL:P{OUTPUT:threadmode}&#37;&#37;TMPL:END&#37;
</pre>
<p></p>

<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/hand.png' width='16' height='16' alt='hand' /></span> See rendered template <a href="/bin/view/Sandbox/CommentPluginExamples#return">return</a>
<p class='p'></p>

<h2 id="Include_UserComments">  Include UserComments </h2>
<p></p>

Including <a class="foswikiNewLink" href="/bin/edit/System/UserCommentsTemplate?topicparent=System.CommentPluginTemplate" rel="nofollow" title="Create this topic">UserCommentsTemplate</a> ("Template" gets automatically appended to the name):
<p></p>

%TMPL:INCLUDE{"UserComments"}%</div>
<p class='p'></p>

</div>
<div class="patternInfo">This topic: System<span class='foswikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/System/Category">Category</a> &gt; <a href="/bin/view/System/AdminDocumentationCategory">AdminDocumentationCategory</a> &gt; <a href="/bin/view/System/Plugins">Plugins</a> &gt; <a href="/bin/view/System/CommentPlugin">CommentPlugin</a><span class='foswikiSeparator'>&nbsp;&gt;&nbsp;</span>CommentPluginTemplate <br />
Topic revision:  <span class='patternRevInfo'>22 Jan 2018, <a href="/bin/view/Main/UnknownUser">UnknownUser</a></span></div>
</div>
</div>
</div>
</div><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="patternWebBottomBar"><span class="foswikiRight"> <a href="http://foswiki.org/"><img src="/pub/System/ProjectLogos/foswiki-badge.png" height="42" alt="This site is powered by Foswiki" title="This site is powered by Foswiki" /></a></span>Copyright &copy; by the contributing authors. All material on this site is the property of the contributing authors. <br /> Ideas, requests, problems regarding DAMASK? <a href='mailto:damask@mpie.de?subject=DAMASK%20Feedback%20on%20System.CommentPluginTemplate'>Send feedback</a> </div></div></div>
</div>
</div>
</div>
</div></body></html>