<!DOCTYPE html><html lang="en">
<head>
<title> JQueryLiveQuery &lt; System &lt; DAMASK</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.5, user-scalable=yes" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<link rel="icon" href="/pub/System/ProjectLogos/favicon-damask.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/pub/System/ProjectLogos/favicon-damask.ico" type="image/x-icon" />
<link rel="alternate" href="https://damask.mpie.de/bin/edit/System/JQueryLiveQuery?t=1627672980" type="application/x-wiki" title="edit JQueryLiveQuery" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" />
<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/System/WebRss" />
<base href="https://damask.mpie.de/bin/view/System/JQueryLiveQuery" /><!--[if IE]></base><![endif]-->
<link rel='stylesheet' href='/pub/System/PageOptimizerPlugin/cache/c21fd22ae8a6817e47c25c5763dfb271.css' class='CLASSIFICATIONPLUGIN::CSS JQUERYPLUGIN::ANIMATE JQUERYPLUGIN::BOOKMAKER JQUERYPLUGIN::BUTTON JQUERYPLUGIN::COMMENT JQUERYPLUGIN::TABLESORTER SMILIESPLUGIN head' media='all' />
<style class='head EXTERNALLINKPLUGIN_CSS' type="text/css" media="all">
.externalLink a:link,
.externalLink a:visited,
.externalLink a:hover {
	background-image:url(/pub/System/ExternalLinkPlugin/diagonal.gif);
	background-repeat:no-repeat;
	background-position:right;
	padding-right:18px;
}
</style>

<style type="text/css" media="all">
		  /* Styles that are set using variables */
		  .patternWebIndicator,
		  .patternWebIndicator a {
					 background-color:none;
		  }
		  #patternTopBarContents { background-image:url(https://damask.mpie.de/pub/System/ProjectLogos/DAMASK.png); background-repeat:repeat-x;}

.patternBookView {
	border-color:#B9DAFF;
}
.patternPreviewPage #patternMain {
	/* uncomment to set the preview image */
	/*background-image:url("/pub/System/PreviewBackground/preview2bg.gif");*/
}
</style>

<script class='script JQUERYPLUGIN' src='/pub/System/JQueryPlugin/jquery-2.2.4.js'></script>
<script class='script JQUERYPLUGIN::BROWSER' src='/pub/System/JQueryPlugin/plugins/browser/jquery.browser.js?version=0.1.0'></script>
<script class='script JQUERYPLUGIN::MIGRATE' src='/pub/System/JQueryPlugin/plugins/migrate/jquery.migrate.js?version=3.2.1'></script>
<script class='script JQUERYPLUGIN::LIVEQUERY' src='/pub/System/JQueryPlugin/plugins/livequery/jquery.livequery.js?version=1.3.6'></script>
<script class='script JQUERYPLUGIN::FOSWIKI' src='/pub/System/JQueryPlugin/plugins/foswiki/jquery.foswiki.js?version=2.14'></script>
<script class='script JavascriptFiles/foswikiString' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiString.js"></script>
<script class='script JavascriptFiles/foswikiPref' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiPref.js"></script>
<script class='script JavascriptFiles/foswikiForm' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiForm.js"></script>
<script class='script PatternSkin/pattern' type="text/javascript" src="/pub/System/PatternSkin/pattern.js"></script>
<script class='script JavascriptFiles/strikeone' type="text/javascript" src="/pub/System/JavascriptFiles/strikeone.js"></script>
<script class='script JQUERYPLUGIN::METADATA' src='/pub/System/JQueryPlugin/plugins/metadata/jquery.metadata.js?version=2.1ef2bb44c86f5d0e98d55'></script>
<script class='script JQUERYPLUGIN::ANIMATE' src='/pub/System/JQueryPlugin/plugins/animate/animate.js?version=3.7.0'></script>
<script class='script JQUERYPLUGIN::LOADER' src='/pub/System/JQueryPlugin/plugins/loader/jquery.loader.js?version=4.00'></script>
 <litreral>
<script>

jQuery(function($) {
  $(".trigger").livequery(
    function() {
      var $this = $(this);

      $this.css({
        color:'#fff',
        background:'#b20000',
        display:'inline-block',
        padding:'0.5em'
      });

      //alert("there's a new trigger");
    },
    function() {
      //alert("there's a trigger going offline");
    }
  );

  // adds the refresh behavior
  $(".refresh").click(function() {
    $("#loader").trigger("refresh");
    return false;
  });
});

</script>

<script class='script JQUERYPLUGIN::FOSWIKI::PREFERENCES foswikiPreferences' type='text/json'>{
   "SCRIPTURLPATHS" : {
      "view" : "/bin/view"
   },
   "SCRIPTURLPATH" : "/bin",
   "USERSWEB" : "Main",
   "PUBURLPATH" : "/pub",
   "SKIN" : "damask,famfamfam,pattern",
   "SYSTEMWEB" : "System",
   "WEB" : "System",
   "WIKIUSERNAME" : "Main.WikiGuest",
   "SCRIPTURL" : "https://damask.mpie.de/bin",
   "COOKIEREALM" : "",
   "PUBURL" : "https://damask.mpie.de/pub",
   "SERVERTIME" : "30 Jul 2021 - 21:23",
   "SCRIPTSUFFIX" : "",
   "WIKINAME" : "WikiGuest",
   "TOPIC" : "JQueryLiveQuery",
   "URLHOST" : "https://damask.mpie.de",
   "USERNAME" : "guest",
   "NAMEFILTER" : "[\\\\\\s*?~^$@%`\"'&|<:;>\\[\\]#\\x00-\\x1f]"
}
</script>
<script class='script JQTABLEPLUGIN::SORT' type='text/javascript'>
jQuery.extend(foswiki.preferences, {
  'JQTablePlugin.sort' : 'all'
});
</script>
<script class='script JQUERYPLUGIN::UPLOADER::META foswikiPreferences' type='text/json'>{"TopicInteractionPlugin":{"officeSuite":"","attachFileSizeLimit":"262144"}}</script>
<script class='script JQUERYPLUGIN::BUTTON' src='/pub/System/JQueryPlugin/plugins/button/jquery.button.init.js?version=2.0'></script>
<script class='script JQUERYPLUGIN::BOOKMAKER' src='/pub/System/BookmakerPlugin/bookmaker.js?version=1.1.0'></script>
<script class='script JQUERYPLUGIN::COMMENT' src='/pub/System/CommentPlugin/comment.js?version=3.0'></script>
<script class='script JQUERYPLUGIN::JEDITABLE' src='/pub/System/JEditableContrib/jquery.jeditable.js?version=06 Feb 2017'></script>
<script class='script JQUERYPLUGIN::TABLESORTER' src='/pub/System/JQTablePlugin/jquery.tablesorter.js?version=2.0.3'></script>
<script class='script JQUERYPLUGIN::TABLESORTER' src='/pub/System/JQTablePlugin/tables.js?version=2.0.3'></script>

<link rel="stylesheet" href="https://damask.mpie.de/pub/x3dom-1.7.1/x3dom.css">
<script src="https://damask.mpie.de/pub/x3dom-1.7.1/x3dom.js"></script>
</head> 
<body class="foswikiNoJs patternViewPage patternPrintPage"><div id="bookmaker">
  <img src='/pub/System/FamFamFamSilkIcons/book_open.png' class='foswikiIcon jqIcon book_open'  alt='book_open' /> Bookmaker for <a href="/bin/view/Sandbox/ExampleBook">ExampleBook</a>
  <table width="100%" cellpadding="0" cellspacing="0" style="min-height: 25px">
	 <tr>
		<td align="left" width="5%">
	<a id='bookmaker_change' class='jqButton ' href='#' title='Open a different book' ><span class='jqButtonText'>Change book</span></a>
	<div id="new_book" style="display:none">
	  <form method="POST" action="/bin/view/System/JQueryLiveQuery" onsubmit="StrikeOne.submit(this)"><input type='hidden' name='validation_key' value='?7ddbefcf90b2f6ec3ad3bdb1930af107' />
	    <input type="text" id="book_title" name="open_bookmaker" title="Enter the web.topic name of the book topic, and hit Enter" value="Sandbox.ExampleBook" />
	  </form>
	</div>
		 </td>
		<td align="left">
	<a id='bookmaker_close' class='jqButton ' href='/bin/view/System/JQueryLiveQuery?close_bookmaker=1' title='Close the bookmaker interface' ><span class='jqButtonText'>Close bookmaker</span></a>
		</td>
		<td align="right">
	<form method="POST" onsubmit="StrikeOne.submit(this)"><input type='hidden' name='validation_key' value='?44426245d0b11e698a79bd10138f0adb' />
	  <a id='bookmaker_add_button' class='jqButton bookmaker_button bookmaker_action bookmaker_active' href='https://damask.mpie.de/bin/rest/BookmakerPlugin/add?topic=System.JQueryLiveQuery' title='Add the current topic to the book' ><span class='jqButtonText'>Add to book</span></a>
	  <a id='bookmaker_remove_button' class='jqButton bookmaker_button bookmaker_action ' href='https://damask.mpie.de/bin/rest/BookmakerPlugin/remove?topic=System.JQueryLiveQuery' title='Remove the current topic from the book' ><span class='jqButtonText'>Remove from book</span></a>
	</form>
		</td>
		<td>
	<form method="GET">
	  <a class="bookmaker_button" id="bookmaker_expand" href="https://damask.mpie.de/bin/rest/BookmakerPlugin/list" title="Click to expand the book">
	  <img src='/pub/System/FamFamFamSilkIcons/application_side_expand.png' class='foswikiIcon jqIcon application_side_expand'  alt='application_side_expand' /></a>
	</form>
		</td>
	 </tr>
  </table>
  <div id="bookmaker_more">
	 <em>You can change the order/nesting of topics using drag and drop</em> <br />
	 <a id="bookmaker_contract"><img src='/pub/System/FamFamFamSilkIcons/application_side_contract.png' class='foswikiIcon jqIcon application_side_contract'  alt='application_side_contract' /></a>
	 <div id="book_tree">
	 </div>
  </div>
</div>
<span id="PageTop"></span><div class="foswikiPage"><div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter" class="clear">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="foswikiTopic"> <h1 id="JQueryLiveQuery">  <a class="foswikiCurrentTopicLink" href="/bin/view/System/JQueryLiveQuery">JQueryLiveQuery</a> </h1>
<p></p>

    Homepage: <a href="https://github.com/hazzik/livequery">https://github.com/hazzik/livequery</a> <br />
    Author(s): Brandon Aaron, Alexander Zaytsev <br />
    Version: 1.3.6
<p class='p'></p>

<div class="foswikiToc" id="foswikiTOC"><span class="foswikiTocTitle">On this page:</span> <ul>
<li> <a href="?cover=print#How_to_use_it"> How to use it </a>
</li> <li> <a href="?cover=print#API"> API </a> <ul>
<li> <a href="?cover=print#A_61livequery_61_signatures"> livequery signatures </a>
</li> <li> <a href="?cover=print#A_61expire_61_signatures"> expire signatures </a>
</li></ul> 
</li> <li> <a href="?cover=print#For_Plugin_Developers"> For Plugin Developers </a>
</li> <li> <a href="?cover=print#Example"> Example </a>
</li></ul> 
</div>
<p></p>

<h2 id="How_to_use_it">  How to use it </h2>
<p class='p'></p>

<p class='p'>Live Query utilizes the power of jQuery selectors by firing callbacks for
matched elements auto-magically, even after the page has been loaded and the
DOM updated.</p>

<p class='p'></p>

<p class='p'>Live Query fires a function (callback) when it matches a new element and
another function (callback) for when an element is no longer matched. This
provides ultimate flexibility and untold use-cases. For example the following
code uses a function based Live Query to implement the jQuery hover helper
method and remove it when the element is no longer matched.</p>

<pre class="js">
&#36;(&#39;li&#39;) 
    .livequery(function(){ 
    // use the helper function hover to bind a mouseover and mouseout event 
        &#36;(this) 
            .hover(function() { 
                &#36;(this).addClass(&#39;hover&#39;); 
            }, function() { 
                &#36;(this).removeClass(&#39;hover&#39;); 
            }); 
    }, function() { 
        // unbind the mouseover and mouseout events 
        &#36;(this) 
            .unbind(&#39;mouseover&#39;) 
            .unbind(&#39;mouseout&#39;); 
    }); 
</pre>
<p></p>

<h2 id="API">  API </h2>
<p></p>

<h3 id="A_61livequery_61_signatures">  <code>livequery</code> signatures </h3>
<p></p>

The <code>livequery</code> method has 2 different signatures or ways to call it.
<p></p>

Pass one or two functions to <code>livequery</code>. Doing this, <code>livequery</code> will call the
first passed function when an element is newly matched and will call the second
passed function when an element is removed or no longer matched. The second
function is optional. The <code>this</code> or context of the first function will be the
newly matched element. For the second function it will be the element that is
no longer matched.
<p></p>

<pre class="js">
// matchedFn: the function to execute when a new element is matched
&#36;(selector).livequery( matchedFn );

// matchedFn: the function to execute when a new element is matched
// unmatchedFn: the function to execute when an element is no longer matched
&#36;(selector).livequery( matchedFn, unmatchFn );
</pre>
<p></p>

<h3 id="A_61expire_61_signatures">  <code>expire</code> signatures </h3>
<p></p>

The <code>expire</code> method has 3 different signatures or ways to call it.
<p class='p'>The first way will stop/expire all live queries associated with the selector.</p>

<pre class="js">
&#36;(selector).expire();
</pre>
<p class='p'>The second way will stop/expire all live queries associated with the selector and matchedFn.</p>

<pre class="js">
// matchedFn: the function to execute when a new element is matched
&#36;(selector).expire( matchedFn );
</pre>
<p class='p'>The third way will stop/expire all live queries associated with the selector, matchedFn, and unmatchedFn.</p>

<pre class="js">
// matchedFn: the function to execute when a new element is matched
// unmatchedFn: the function to execute when an element is no longer matched
&#36;(selector).expire( matchedFn, unmatchFn );
</pre>
<p></p>

<h2 id="For_Plugin_Developers">  For Plugin Developers </h2>
<p class='p'>If your plugin modifies the DOM without using the built-in DOM Modification methods (append, addClass, etc), you can register your plugin with Live Query like this.</p>

<pre class="js">
if (jQuery.livequery) 
    jQuery.livequery.registerPlugin(&#34;pluginMethodName&#34;); 
</pre>
<p class='p'>You can register several plugin methods at once by just passing them as additional arguments to the registerPlugin method.</p>

<pre class="js">
if (jQuery.livequery) 
    jQuery.livequery.registerPlugin(&#34;method1&#34;, &#34;method2&#34;, &#34;method3&#34;); 
</pre>
<p></p>

<h2 id="Example">  Example </h2>
<p class='p'></p>

<p class='p'></p>

This is the <code>livequery</code> code to prepare the page to process any dom element of class <code>trigger</code> when no matter when it appears.
<p></p>

<pre class="js">
&#37;STARTSECTION{&#34;javascript&#34;}&#37; &#60;litreral&#62;
&#60;script&#62;

jQuery(function(&#36;) {
  &#36;(&#34;.trigger&#34;).livequery(
    function() {
      var &#36;this &#61; &#36;(this);

      &#36;this.css({
        color:&#39;#fff&#39;,
        background:&#39;#b20000&#39;,
        display:&#39;inline-block&#39;,
        padding:&#39;0.5em&#39;
      });

      //alert(&#34;there&#39;s a new trigger&#34;);
    },
    function() {
      //alert(&#34;there&#39;s a trigger going offline&#34;);
    }
  );

  // adds the refresh behavior
  &#36;(&#34;.refresh&#34;).click(function() {
    &#36;(&#34;#loader&#34;).trigger(&#34;refresh&#34;);
    return false;
  });
});

&#60;/script&#62;
&#60;/literal&#62; &#37;ENDSECTION{&#34;javascript&#34;}&#37;
</pre>
<p class='p'></p>

<p class='p'></p>

This is the content to be loaded asynchronously. It contains a div element with a <code>trigger</code> class. This div will be 
processed by an event handler registered using <code>livequery</code>.
<p></p>

<pre class="tml">
&#37;STARTSECTION{&#34;loadme&#34;}&#37; &#60;div class&#61;&#34;trigger&#34;&#62;hello world&#60;/div&#62; &#37;ENDSECTION{&#34;loadme&#34;}&#37;
</pre>
<p></p>

This is a <a href="/bin/view/System/JQueryLoader">JQueryLoader</a> that will load the content of the <code>loadme</code> section below one with a delay of two second.
<p></p>

<div id="loader" class="jqLoader" data-section="loadme" data-delay="2000">
<span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/processing.gif' width='16' height='16' alt='processing' /></span>
</div>
<p></p>

Click <a href="#" class="refresh">refresh</a> to do it again.</div>
<p class='p'></p>

</div>
<div class="patternInfo">This topic: System<span class='foswikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/System/JQueryPlugin">JQueryPlugin</a><span class='foswikiSeparator'>&nbsp;&gt;&nbsp;</span>JQueryLiveQuery <br />
Topic revision:  <span class='patternRevInfo'>18 Nov 2019, <a href="/bin/view/Main/UnknownUser">UnknownUser</a></span></div>
</div>
</div>
</div>
</div><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="patternWebBottomBar"><span class="foswikiRight"> <a href="http://foswiki.org/"><img src="/pub/System/ProjectLogos/foswiki-badge.png" height="42" alt="This site is powered by Foswiki" title="This site is powered by Foswiki" /></a></span>Copyright &copy; by the contributing authors. All material on this site is the property of the contributing authors. <br /> Ideas, requests, problems regarding DAMASK? <a href='mailto:damask@mpie.de?subject=DAMASK%20Feedback%20on%20System.JQueryLiveQuery'>Send feedback</a> </div></div></div>
</div>
</div>
</div>
</div></body></html>