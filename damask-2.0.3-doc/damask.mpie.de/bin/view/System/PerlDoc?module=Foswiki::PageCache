<!DOCTYPE html><html lang="en">
<head>
<title> PerlDoc &lt; System &lt; DAMASK</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.5, user-scalable=yes" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<link rel="icon" href="/pub/System/ProjectLogos/favicon-damask.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/pub/System/ProjectLogos/favicon-damask.ico" type="image/x-icon" />
<link rel="alternate" href="https://damask.mpie.de/bin/edit/System/PerlDoc?t=1627671208" type="application/x-wiki" title="edit PerlDoc" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" />
<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/System/WebRss" />
<base href="https://damask.mpie.de/bin/view/System/PerlDoc" /><!--[if IE]></base><![endif]-->
<style class='head EXTERNALLINKPLUGIN_CSS' type="text/css" media="all">
.externalLink a:link,
.externalLink a:visited,
.externalLink a:hover {
	background-image:url(/pub/System/ExternalLinkPlugin/diagonal.gif);
	background-repeat:no-repeat;
	background-position:right;
	padding-right:18px;
}
</style>
<link rel='stylesheet' href='/pub/System/PageOptimizerPlugin/cache/1f85b2fd0fa02473cb38c5e63eae7ddd.css' class='CLASSIFICATIONPLUGIN::CSS JQUERYPLUGIN::BOOKMAKER JQUERYPLUGIN::BUTTON JQUERYPLUGIN::COMMENT JQUERYPLUGIN::TABLESORTER JQUERYPLUGIN::TWISTY SMILIESPLUGIN head' media='all' />

<style type="text/css" media="all">
		  /* Styles that are set using variables */
		  .patternWebIndicator,
		  .patternWebIndicator a {
					 background-color:none;
		  }
		  #patternTopBarContents { background-image:url(https://damask.mpie.de/pub/System/ProjectLogos/DAMASK.png); background-repeat:repeat-x;}

.patternBookView {
	border-color:#B9DAFF;
}
.patternPreviewPage #patternMain {
	/* uncomment to set the preview image */
	/*background-image:url("/pub/System/PreviewBackground/preview2bg.gif");*/
}
</style>
<link rel='stylesheet' href='/pub/System/PatternSkin/print.css' media='print' type='text/css' />

<script class='script JQUERYPLUGIN' src='/pub/System/JQueryPlugin/jquery-2.2.4.js'></script>
<script class='script JQUERYPLUGIN::BROWSER' src='/pub/System/JQueryPlugin/plugins/browser/jquery.browser.js?version=0.1.0'></script>
<script class='script JQUERYPLUGIN::MIGRATE' src='/pub/System/JQueryPlugin/plugins/migrate/jquery.migrate.js?version=3.2.1'></script>
<script class='script JQUERYPLUGIN::LIVEQUERY' src='/pub/System/JQueryPlugin/plugins/livequery/jquery.livequery.js?version=1.3.6'></script>
<script class='script JQUERYPLUGIN::FOSWIKI' src='/pub/System/JQueryPlugin/plugins/foswiki/jquery.foswiki.js?version=2.14'></script>
<script class='script JQUERYPLUGIN::TABLESORTER' src='/pub/System/JQTablePlugin/jquery.tablesorter.js?version=2.0.3'></script>
<script class='script JQUERYPLUGIN::TABLESORTER' src='/pub/System/JQTablePlugin/tables.js?version=2.0.3'></script>
<script class='script JQUERYPLUGIN::FOSWIKI::PREFERENCES foswikiPreferences' type='text/json'>{
   "WIKINAME" : "WikiGuest",
   "SCRIPTURL" : "https://damask.mpie.de/bin",
   "PUBURL" : "https://damask.mpie.de/pub",
   "TOPIC" : "PerlDoc",
   "WIKIUSERNAME" : "Main.WikiGuest",
   "WEB" : "System",
   "SYSTEMWEB" : "System",
   "NAMEFILTER" : "[\\\\\\s*?~^$@%`\"'&|<:;>\\[\\]#\\x00-\\x1f]",
   "PUBURLPATH" : "/pub",
   "USERNAME" : "guest",
   "COOKIEREALM" : "",
   "SCRIPTURLPATH" : "/bin",
   "SCRIPTSUFFIX" : "",
   "URLHOST" : "https://damask.mpie.de",
   "SCRIPTURLPATHS" : {
      "view" : "/bin/view"
   },
   "SERVERTIME" : "30 Jul 2021 - 20:53",
   "USERSWEB" : "Main",
   "SKIN" : "damask,famfamfam,pattern"
}
</script>
<script class='script JQTABLEPLUGIN::SORT' type='text/javascript'>
jQuery.extend(foswiki.preferences, {
  'JQTablePlugin.sort' : 'all'
});
</script>
<script class='script JQUERYPLUGIN::UPLOADER::META foswikiPreferences' type='text/json'>{"TopicInteractionPlugin":{"officeSuite":"","attachFileSizeLimit":"262144"}}</script>
<script class='script JQUERYPLUGIN::METADATA' src='/pub/System/JQueryPlugin/plugins/metadata/jquery.metadata.js?version=2.1ef2bb44c86f5d0e98d55'></script>
<script class='script JQUERYPLUGIN::BUTTON' src='/pub/System/JQueryPlugin/plugins/button/jquery.button.init.js?version=2.0'></script>
<script class='script JavascriptFiles/foswikiString' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiString.js"></script>
<script class='script JavascriptFiles/foswikiPref' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiPref.js"></script>
<script class='script JQUERYPLUGIN::TWISTY' src='/pub/System/TwistyPlugin/jquery.twisty.js?version=1.6.0'></script>
<script class='script JavascriptFiles/foswikiForm' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiForm.js"></script>
<script class='script JQUERYPLUGIN::COMMENT' src='/pub/System/CommentPlugin/comment.js?version=3.0'></script>
<script class='script JQUERYPLUGIN::JEDITABLE' src='/pub/System/JEditableContrib/jquery.jeditable.js?version=06 Feb 2017'></script>
<script class='script JQUERYPLUGIN::BOOKMAKER' src='/pub/System/BookmakerPlugin/bookmaker.js?version=1.1.0'></script>
<script class='script PatternSkin/pattern' type="text/javascript" src="/pub/System/PatternSkin/pattern.js"></script>
<script class='script JavascriptFiles/strikeone' type="text/javascript" src="/pub/System/JavascriptFiles/strikeone.js"></script>

<link rel="stylesheet" href="https://damask.mpie.de/pub/x3dom-1.7.1/x3dom.css">
<script src="https://damask.mpie.de/pub/x3dom-1.7.1/x3dom.js"></script>
</head> 
<body class="foswikiNoJs patternViewPage foswikiHasNoChangePermission foswikiGuest"><div id="bookmaker">
  <img src='/pub/System/FamFamFamSilkIcons/book_open.png' class='foswikiIcon jqIcon book_open'  alt='book_open' /> Bookmaker for <a href="/bin/view/Sandbox/ExampleBook">ExampleBook</a>
  <table width="100%" cellpadding="0" cellspacing="0" style="min-height: 25px">
	 <tr>
		<td align="left" width="5%">
	<a id='bookmaker_change' class='jqButton ' href='#' title='Open a different book' ><span class='jqButtonText'>Change book</span></a>
	<div id="new_book" style="display:none">
	  <form method="POST" action="/bin/view/System/PerlDoc" onsubmit="StrikeOne.submit(this)"><input type='hidden' name='validation_key' value='?f55a63eb0da6be8dd6903235f8045eed' />
	    <input type="text" id="book_title" name="open_bookmaker" title="Enter the web.topic name of the book topic, and hit Enter" value="Sandbox.ExampleBook" />
	  </form>
	</div>
		 </td>
		<td align="left">
	<a id='bookmaker_close' class='jqButton ' href='/bin/view/System/PerlDoc?close_bookmaker=1' title='Close the bookmaker interface' ><span class='jqButtonText'>Close bookmaker</span></a>
		</td>
		<td align="right">
	<form method="POST" onsubmit="StrikeOne.submit(this)"><input type='hidden' name='validation_key' value='?d85b5b75e8843937d116513540a45565' />
	  <a id='bookmaker_add_button' class='jqButton bookmaker_button bookmaker_action bookmaker_active' href='https://damask.mpie.de/bin/rest/BookmakerPlugin/add?topic=System.PerlDoc' title='Add the current topic to the book' ><span class='jqButtonText'>Add to book</span></a>
	  <a id='bookmaker_remove_button' class='jqButton bookmaker_button bookmaker_action ' href='https://damask.mpie.de/bin/rest/BookmakerPlugin/remove?topic=System.PerlDoc' title='Remove the current topic from the book' ><span class='jqButtonText'>Remove from book</span></a>
	</form>
		</td>
		<td>
	<form method="GET">
	  <a class="bookmaker_button" id="bookmaker_expand" href="https://damask.mpie.de/bin/rest/BookmakerPlugin/list" title="Click to expand the book">
	  <img src='/pub/System/FamFamFamSilkIcons/application_side_expand.png' class='foswikiIcon jqIcon application_side_expand'  alt='application_side_expand' /></a>
	</form>
		</td>
	 </tr>
  </table>
  <div id="bookmaker_more">
	 <em>You can change the order/nesting of topics using drag and drop</em> <br />
	 <a id="bookmaker_contract"><img src='/pub/System/FamFamFamSilkIcons/application_side_contract.png' class='foswikiIcon jqIcon application_side_contract'  alt='application_side_contract' /></a>
	 <div id="book_tree">
	 </div>
  </div>
</div>
<span id="PageTop"></span><div class="foswikiPage"><div id="patternScreen">
<div id="patternPageShadow"><div id="patternTopBar">
  <div id="patternTopBarContentsWrapper">
	 <div id="patternTopBarContents"><table border="0" cellpadding="0" cellspacing="0" style="width:100%" summary="">
<tr><td valign="middle"><span id="foswikiLogo" class="foswikiImage"><a href="https://damask.mpie.de/bin/view/Home/WebHome"><img src="" border="0" alt="Powered by Foswiki, The Free and Open Source Wiki" style="border:none;" /></a></span></td>
<td align="right" valign="top" class="patternMetaMenu">
 <ul>
<li> <form name="jumpForm" action="/bin/view/System/PerlDoc"><input id="jumpFormField" title="Jump" type="text" class="foswikiInputField foswikiDefaultText" name="topic" value="" size="18" /><noscript>&nbsp;<input type="submit" class="foswikiButton" size="5" name="submit" value="Jump" />&nbsp;</noscript>   </form>
</li> <li> <form name="quickSearchForm" action="/bin/view/System/WebSearch"><input type="text" class="foswikiInputField foswikiDefaultText" title="Search" id="quickSearchBox" name="search" value="" size="18" /><input type="hidden" name="scope" value="all" /><input type="hidden" name="web" value="System" /><noscript>&nbsp;<input type="submit" size="5" class="foswikiButton" name="submit" value="Search" />&nbsp;</noscript>   </form>
</li></ul> 
<p></p>

</td></tr></table></div>
  </div>
</div><div id="patternTopBarButtons"><ul>
<li><a href="https://damask.mpie.de/bin/view/Home/WebHome" class="inactive">Home</a></li>
<li><a href="https://damask.mpie.de/bin/view/About/WebHome" class="inactive">About</a></li>
<li><a href="https://damask.mpie.de/bin/view/Download/WebHome" class="inactive">Download</a></li>
<li><a href="https://damask.mpie.de/bin/view/Installation/WebHome" class="inactive">Installation</a></li>
<li><a href="https://damask.mpie.de/bin/view/Usage/WebHome" class="inactive">Usage</a></li>
<li><a href="https://damask.mpie.de/bin/view/Documentation/WebHome" class="inactive">Documentation</a></li>
<li><a href="https://damask.mpie.de/bin/view/Development/WebHome" class="inactive">Development</a></li>
<li><a href="https://damask.mpie.de/bin/view/References/WebHome" class="inactive">References</a></li>
<li><a href="https://damask.mpie.de/bin/view/Examples/WebHome" class="inactive">Examples</a></li>
</ul><div class="foswikiClear"></div></div>
<div id="patternPage">
<div id="patternWrapper"><div id="patternOuter" class="clear">
<div id="patternFloatWrap">
<div id="patternMain"><div id="patternClearHeaderCenter"></div>
<div id="patternMainContents"><div class="patternTop clear"><span class="patternHomePath foswikiLeft"><span class="patternHomePathTitle">You are here: </span><a href="/bin/view/">DAMASK</a><span class='foswikiSeparator'>&gt;</span><a href="/bin/view/System/WebHome">System</a><span class='foswikiSeparator'>&gt;</span><a href="/bin/view/System/Category">Category</a><span class='foswikiSeparator'>&gt;</span><a href="/bin/view/System/DeveloperDocumentationCategory">DeveloperDocumentationCategory</a><span class='foswikiSeparator'>&gt;</span><a href="https://damask.mpie.de/bin/view/System/PerlDoc" title='Topic revision: 1 (03 Feb 2016 - 17:22:31)'>PerlDoc</a></span><span class="patternToolBar foswikiRight"><span class='foswikiToolBar foswikiRight foswikiUnauthenticated'>
<p></p>

<span>
<a href="https://damask.mpie.de/bin/edit/System/PerlDoc?t=1627671208;nowysiwyg=1" title="Edit Wiki text (w)">
<img alt="Edit Wiki text (w)" src="https://damask.mpie.de/pub/System/FamFamFamSilkIcons/pencil.png" width="16" height="16" />
</a></span><span>
	<a class='foswikiRequiresChangePermission' href='https://damask.mpie.de/bin/attach/System/PerlDoc' title='Attach an image or document to this topic; manage existing attachments (a)'>
		<img alt='Attach an image or document to this topic; manage existing attachments (a)' src='https://damask.mpie.de/pub/System/FamFamFamSilkIcons/attach.png' width='16' height='16' />
	</a></span><span>
    </span><span>
	<a href='https://damask.mpie.de/bin/diff/System/PerlDoc?type=history' title='View sequential topic history'>
		<img alt='View sequential topic history' src='https://damask.mpie.de/pub/System/FamFamFamSilkIcons/page_white_stack.png' width='16' height='16' />
	</a></span><span>
	<a href='https://damask.mpie.de/bin/view/System/PerlDoc?raw=on&amp;rev=1' title='View without formatting (v)'>
		<img alt='View without formatting (v)' src='https://damask.mpie.de/pub/System/FamFamFamSilkIcons/text_align_left.png' width='16' height='16' />
	</a></span><span>
	<a class='foswikiRequiresChangePermission' href='https://damask.mpie.de/bin/view/System/WebCreateNewTopic?topicparent=PerlDoc' title='Create new topic'>
		<img alt='Create new topic' src='https://damask.mpie.de/pub/System/FamFamFamSilkIcons/page_white_add.png' width='16' height='16' />
	</a></span><span>
	<a href='https://damask.mpie.de/bin/view/System/PerlDoc?cover=print;module=Foswiki::PageCache' title='Printable version of this topic (p)'>
		<img alt='Printable version of this topic (p)' src='https://damask.mpie.de/pub/System/FamFamFamSilkIcons/printer.png' width='16' height='16' />
	</a></span><span>
        <a href='https://damask.mpie.de/bin/oops/System/PerlDoc?template=more&amp;maxrev=1&amp;currrev=1' title='More: delete or rename this topic; set parent topic; view and compare revisions (m)'>
                <img alt='More: delete or rename this topic; set parent topic; view and compare revisions (m)' src='https://damask.mpie.de/pub/System/FamFamFamSilkIcons/wrench.png' width='16' height='16' />
	</a></span> 
		</span></span></div><div class="foswikiContentHeader"></div><div class="patternContent"><div class="foswikiTopic"><h2 id="A_61internal_package_61_Foswiki::PageCache">   <code>internal package</code> <a href="https://damask.mpie.de/bin/view/System/PerlDoc?module=Foswiki">Foswiki</a>::PageCache </h2>
<form class='foswikiForm' action='/bin/view/System/PerlDoc'>
<div class='foswikiFormSteps'>
  <div class='foswikiFormStep'>
      See <a href="/bin/view/System/PublishedAPI">PublishedAPI</a> for packages intended to be used by Plugin and Contrib authors, or <a class="foswikiCurrentTopicLink" href="/bin/view/System/PerlDoc?module=Foswiki">browse all packages</a>.<br>
      See also <a href="/bin/view/System/DevelopingPlugins">Developing plugins</a>, <a class="interwikiLink" href="https://foswiki.org/Development.DevelopersBible" title="'Development.DevelopersBible' on foswiki.org">Developer's Bible</a>, <a class="interwikiLink" href="https://foswiki.org/Development.TechnicalOverview" title="'Development.TechnicalOverview' on foswiki.org">Technical Overview</a> 
  </div>
  <div class='foswikiFormStep'>
    <label for='module'><b>Perl Module:</b></label>
    <input type='text' name='module' id='module' size='60' value='Foswiki::PageCache' class='foswikiInputField' />
<!--
Commented this out right before 1.1.5 - we should distinguish between 'public' and 'published' classes.
    <label for='publicOnly'><b>Public Only:</b></label>
    <input type='checkbox' name='publicOnly' id='publicOnly' value='on'  class='foswikiInputField' />
-->
    <input type='submit' value='Submit' class='foswikiSubmit' />
  </div>
  <div class='foswikiFormStep'>
    <div class="twistyPlugin foswikiMakeVisible"><span id="twistyIdSystemPerlDoc1show" style="display:none" class="twistyRememberSetting twistyTrigger foswikiUnvisited twistyInited"><a class="foswikiButton" href="#"><span class="foswikiLinkLabel foswikiUnvisited">Child packages</span></a></span><span id="twistyIdSystemPerlDoc1hide" style="display:none" class="twistyRememberSetting twistyTrigger foswikiUnvisited twistyInited"><a class="foswikiButton" href="#"><span class="foswikiLinkLabel foswikiUnvisited">Child packages</span></a></span></div><div class="twistyPlugin"><div id="twistyIdSystemPerlDoc1toggle" style="" class="twistyRememberSetting twistyContent twistyInited">
<p></p>

<ul><li><a href="https://damask.mpie.de/bin/view/System/PerlDoc?module=Foswiki::PageCache::DBI">Foswiki::PageCache::DBI</a> - Implements a Foswiki::PageCache using a DBI compatible backend.</li>
</ul>
    </div></div>
  </div>
</div>
</form>
<p class='p'></p>

<p class='p'></p>

<div class="foswikiToc" id="foswikiTOC"><span class="foswikiTocTitle">On this page:</span> <ul>
<li> <a href="?module=Foswiki::PageCache#A_61internal_package_61_Foswiki::PageCache"> internal package Foswiki::PageCache </a> <ul>
<li> <a href="?module=Foswiki::PageCache#A_61ClassMethod_61_new_40_41_36object"> ClassMethod new( ) &rarr; $object </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_genVariationKey_40_41_36key"> ObjectMethod genVariationKey() &rarr; $key </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_cachePage_40_36contentType_44_36data_41_36boolean"> ObjectMethod cachePage($contentType, $data) &rarr; $boolean </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_getPage_40_36web_44_36topic_41"> ObjectMethod getPage($web, $topic) </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_setPageVariation_40_36web_44_36topici_44_36variationKey_44_36variation_41_36bool"> ObjectMethod setPageVariation($web, $topici, $variationKey, $variation) &rarr; $bool </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_getPageVariation_40_36web_44_36topic_44_36variationKey_41"> ObjectMethod getPageVariation($web, $topic, $variationKey) </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_addDependency_40_36web_44_36topic_41"> ObjectMethod addDependency($web, $topic) </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_getDependencies_40_36web_44_36topic_44_36variationKey_41_92_64deps"> ObjectMethod getDependencies($web, $topic, $variationKey) &rarr; \@deps </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_getWebDependencies_40_36web_41_92_64deps"> ObjectMethod getWebDependencies($web) &rarr; \@deps </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_setDependencies_40_36web_44_36topic_44_36variation_44_64topics_41"> ObjectMethod setDependencies($web, $topic, $variation, @topics) </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_deleteDependencies_40_36web_44_36topic_44_36variation_44_36force_41"> ObjectMethod deleteDependencies($web, $topic, $variation, $force) </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_deletePage_40_36web_44_36topic_44_36variation_44_36force_41"> ObjectMethod deletePage($web, $topic, $variation, $force) </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_deleteAll_40_41"> ObjectMethod deleteAll() </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_fireDependency_40_36web_44_36topic_41"> ObjectMethod fireDependency($web, $topic) </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_renderDirtyAreas_40_36text_41"> ObjectMethod renderDirtyAreas($text) </a>
</li> <li> <a href="?module=Foswiki::PageCache#A_61ObjectMethod_61_finish_40_41"> ObjectMethod finish() </a>
</li></ul> 
</li></ul> 
</div>
<p class='p'></p>

<p class='p'></p>

<h2 id="A_61internal_package_61_Fosw_AN1">  <code>internal package</code> Foswiki::PageCache </h2>
<p></p>

This class is a purely virtual base class that implements the
basic infrastructure required to cache pages as produced by
the rendering engine. Once a page was computed, it will be 
cached for subsequent calls for the same output. In addition
a <a href="https://damask.mpie.de/bin/view/System/PerlDoc?module=Foswiki::PageCache">Foswiki::PageCache</a> has to ensure cache correctness, that is
all content stored in the cache is up-to-date. It must not
return any content being rendered on the base of  data that has already
changed in the meantine by actions performed by the <a href="https://damask.mpie.de/bin/view/System/PerlDoc?module=Foswiki::Store">Foswiki::Store</a>. 
<p></p>

The <a href="https://damask.mpie.de/bin/view/System/PerlDoc?module=Foswiki::Store">Foswiki::Store</a> informs the cache whenever any content has changed
by calling <a href="https://damask.mpie.de/bin/view/System/PerlDoc?module=Foswiki::PageCache">Foswiki::PageCache</a>::fireDependency($web, $topic). This
will in turn delete any cache entries that used this $web.$topic as an
ingredience to render the cached page. That's why there is a dependency
graph part of the page cache.
<p class='p'>The dependency graph records all topics that have been touched while
the current page is being computed. It also records the session and url
parameters that were in use, part of which is the user name as well.</p>

<p class='p'>An edge in the dependency graph consists of:</p>
 <ul>
<li> from: the topic being rendered
</li> <li> variation: an opaque key encoding the context in which the page was rendered
</li> <li> to: the topic that has been used to render the "from" topic
</li></ul> 
<p class='p'>For every cached page there's a record of meta data describing it:</p>
 <ul>
<li> topic: the web.topic being cached
</li> <li> variation: the context which this page was rendered within
</li> <li> md5: fingerprint of the data stored; this is used to get access to the stored     blob related to this page
</li> <li> contenttype: to be used in the http header
</li> <li> lastmodified: time when this page was cached in http-date format
</li> <li> etag: tag used for browser-side caching 
</li> <li> status: http response status 
</li> <li> location: url in case the status is a 302 redirect
</li> <li> expire: time when this cache entry is outdated
</li> <li> isdirty: boolean flag indicating whether the cached page has got "dirtyareas"     and thus needs post-processing
</li></ul> 
<p></p>

Whenever the <a href="https://damask.mpie.de/bin/view/System/PerlDoc?module=Foswiki::Store">Foswiki::Store</a> informs the cache by firing a dependency for
a given web.topic, the cache will remove those cache entries that have a dependency
to the given web.topic. It thereby guarentees that whenever a page has been
successfully retrieved from the cache, there is no "fresher" content available
in the <a href="https://damask.mpie.de/bin/view/System/PerlDoc?module=Foswiki::Store">Foswiki::Store</a>, and that this cache entry can be used instead without
rendering the related yet again.
<p class='p'></p>

<h3 id="A_61ClassMethod_61_new_40_41_36object">  <code>ClassMethod</code> new( ) &rarr; $object </h3>
<p class='p'>Construct a new page cache</p>

<p class='p'></p>

<h3 id="A_61ObjectMethod_61_genVariationKey_40_41_36key">  <code>ObjectMethod</code> genVariationKey() &rarr; $key </h3>
<p class='p'>Generate a key for the current webtopic being produced; this reads
information from the current session and url params, as follows:
    * the server serving the request (HTTP_HOST)
    * the port number of the server serving the request (HTTP_PORT)
    * the action used to render the page (view or rest)
    * the language of the current session, if any
    * all session parameters EXCEPT:
          o Those starting with an underscore
          o VALIDATION
          o REMEMBER
          o FOSWIKISTRIKEONE.*
          o VALID_ACTIONS.*
          o BREADCRUMB_TRAIL
          o DGP_hash
    * all HTTP request parameters EXCEPT:
          o All those starting with an underscore
          o refresh
          o foswiki_redirect_cache
          o logout
          o topic
          o cache_ignore
          o cache_expire</p>

<p class='p'></p>

<h3 id="A_61ObjectMethod_61_cachePage_40_36contentType_44_36data_41_36boolean">  <code>ObjectMethod</code> cachePage($contentType, $data) &rarr; $boolean </h3>
<p class='p'>Cache a page. Every page is stored in a page bucket that contains all
variations (stored for other users or other session parameters) of this page,
as well as dependency and expiration information</p>

<p class='p'></p>

<h3 id="A_61ObjectMethod_61_getPage_40_36web_44_36topic_41">  <code>ObjectMethod</code> getPage($web, $topic) </h3>
<p class='p'>Retrieve a cached page for the given web.topic, using a variation
key based on the current session.</p>

<p class='p'></p>

<h3 id="A_61ObjectMethod_61_setPageVariation_40_36web_44_36topici_44_36variationKey_44_36variation_41_36bool">  <code>ObjectMethod</code> setPageVariation($web, $topici, $variationKey, $variation) &rarr; $bool </h3>
<p class='p'>stores a rendered page</p>

<p class='p'></p>

<h3 id="A_61ObjectMethod_61_getPageVariation_40_36web_44_36topic_44_36variationKey_41">  <code>ObjectMethod</code> getPageVariation($web, $topic, $variationKey) </h3>
<p class='p'>retrievs a cache entry; returns undef if there is none.</p>

<p class='p'></p>

<p class='p'>Checks whether the current page is cacheable. It first
checks the "refresh" url parameter and then looks out
for the "CACHEABLE" preference variable.</p>

<p class='p'></p>

<h3 id="A_61ObjectMethod_61_addDependency_40_36web_44_36topic_41">  <code>ObjectMethod</code> addDependency($web, $topic) </h3>
<p class='p'>Add a web.topic to the dependencies of the current page</p>

<p class='p'></p>

<h3 id="A_61ObjectMethod_61_getDependencies_40_36web_44_36topic_44_36variationKey_41_92_64deps">  <code>ObjectMethod</code> getDependencies($web, $topic, $variationKey) &rarr; \@deps </h3>
<p class='p'>Return dependencies for a given web.topic. if $variationKey is specified, only
dependencies of this page variation will be returned.</p>

<p class='p'></p>

<h3 id="A_61ObjectMethod_61_getWebDependencies_40_36web_41_92_64deps">  <code>ObjectMethod</code> getWebDependencies($web) &rarr; \@deps </h3>
<p class='p'>Returns dependencies that hold for all topics in a web.</p>

<p class='p'></p>

<h3 id="A_61ObjectMethod_61_setDependencies_40_36web_44_36topic_44_36variation_44_64topics_41">  <code>ObjectMethod</code> setDependencies($web, $topic, $variation, @topics) </h3>
<p class='p'>Stores the dependencies for the given web.topic topic. Setting the dependencies
happens at the very end of a rendering process of a page while it is about
to be cached.</p>

When the optional @topics parameter isn't provided, then all dependencies
collected in the <a href="https://damask.mpie.de/bin/view/System/PerlDoc?module=Foswiki::PageCache">Foswiki::PageCache</a> object will be used. These dependencies
are collected during the rendering process. 
<p class='p'></p>

<h3 id="A_61ObjectMethod_61_deleteDependencies_40_36web_44_36topic_44_36variation_44_36force_41">  <code>ObjectMethod</code> deleteDependencies($web, $topic, $variation, $force) </h3>
<p></p>

Remove a dependency from the graph. This operation is normally performed
as part of a call to <a href="https://damask.mpie.de/bin/view/System/PerlDoc?module=Foswiki::PageCache">Foswiki::PageCache</a>::deletePage().
<p class='p'></p>

<h3 id="A_61ObjectMethod_61_deletePage_40_36web_44_36topic_44_36variation_44_36force_41">  <code>ObjectMethod</code> deletePage($web, $topic, $variation, $force) </h3>
<p class='p'>Remove a page from the cache; this removes all of the information
that we have about this page, including any dependencies that have
been established while this page was created.</p>

<p class='p'>If $variation is specified, only this variation of $web.$topic will
be removed. When $variation is not specified, all page variations of $web.$topic
will be removed.</p>

When $force is true, the deletion will take place immediately. Otherwise all
delete requests might be delayed and committed as part of
<a href="https://damask.mpie.de/bin/view/System/PerlDoc?module=Foswiki::PageCache">Foswiki::PageCache</a>::finish().
<p class='p'></p>

<h3 id="A_61ObjectMethod_61_deleteAll_40_41">  <code>ObjectMethod</code> deleteAll() </h3>
<p class='p'>purges all of the cache</p>

<p class='p'></p>

<h3 id="A_61ObjectMethod_61_fireDependency_40_36web_44_36topic_41">  <code>ObjectMethod</code> fireDependency($web, $topic) </h3>
<p class='p'>This method is called to remove all other cache entries that 
used the given $web.$topic as an ingredience to produce the page.</p>

<p class='p'>A dependency is a directed edge starting from a page variation being rendered
towards a depending page that has been used to produce it.</p>

<p class='p'>While dependency edges are stored as they are collected during the rendering
process, these edges are traversed in reverse order when a dependency is
fired.</p>

<p class='p'>In addition all manually asserted dependencies of topics in a web are deleted,
as well as the given topic itself.</p>

<p class='p'></p>

<h3 id="A_61ObjectMethod_61_renderDirtyAreas_40_36text_41">  <code>ObjectMethod</code> renderDirtyAreas($text) </h3>
<p class='p'>Extract dirty areas and render them; this happens after storing a 
page including the un-rendered dirty areas into the cache and after
retrieving it again.</p>

<p class='p'></p>

<h3 id="A_61ObjectMethod_61_finish_40_41">  <code>ObjectMethod</code> finish() </h3>
<p class='p'>clean up finally</p>
 </div>
<div class="foswikiContentFooter"></div><div class="foswikiFormSteps"><div class="patternTopicActions foswikiFormStep"><span class="patternActionButtons"><a class='foswikiRequiresChangePermission' href='https://damask.mpie.de/bin/edit/System/PerlDoc?t=1627671208' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='foswikiAccessKey'>E</span>dit </a><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><a class='foswikiRequiresChangePermission' href='/bin/attach/System/PerlDoc' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='foswikiAccessKey'>A</span>ttach</a><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/view/System/PerlDoc?cover=print;module=Foswiki::PageCache' rel='nofollow' title='Printable version of this topic' accesskey='p'><span class='foswikiAccessKey'>P</span>rint version</a></span><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><span><a class='foswikiRequiresChangePermission' href='/bin/oops/System/PerlDoc?template=oopshistory' rel='nofollow' title='View complete topic history' accesskey='h'><span class='foswikiAccessKey'>H</span>istory</a>: r1</span><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/view/System/PerlDoc?template=backlinksweb' rel='nofollow' title='Search the System Web for topics that link to here' accesskey='b'><span class='foswikiAccessKey'>B</span>acklinks</a></span><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/view/System/PerlDoc?raw=on' rel='nofollow' title='View without formatting' accesskey='v'><span class='foswikiAccessKey'>V</span>iew wiki text</a></span><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><a class='foswikiRequiresChangePermission' href='https://damask.mpie.de/bin/edit/System/PerlDoc?t=1627671208;nowysiwyg=1' rel='nofollow' title='Edit Wiki text' accesskey='w'>Edit <span class='foswikiAccessKey'>w</span>iki text</a><span class='foswikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/view/System/PerlDoc?template=more&amp;maxrev=1&amp;currrev=1' rel='nofollow' title='Delete or rename this topic; set parent topic; view and compare revisions' accesskey='m'><span class='foswikiAccessKey'>M</span>ore topic actions</a></span></span></div></div></div><div class="patternInfo"><span class="patternRevInfo">Topic revision: r1 - 03 Feb 2016, <a href="/bin/view/Main/UnknownUser">UnknownUser</a></span></div>
</div>
</div><div id="patternSideBar"><div id="patternClearHeaderLeft"></div>
<div id="patternSideBarContents">
<div class="patternLeftBarPersonal">
<ul id="patternLeftBarUserActions">
<li class='patternLogIn'><img src='/pub/System/FamFamFamSilkIcons/key.png' class='foswikiIcon jqIcon key'  alt='key' /><a href="/bin/login/System/PerlDoc?foswiki_origin=GET%2cview%2c/bin/view/System/PerlDoc%3fmodule%3dFoswiki::PageCache">Log In</a></li></ul>
</div>
<p class='p'></p>
 <ul>
<li> <strong>Toolbox</strong>
</li> <li> <a href="/bin/view/Main/WikiUsers"> <span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/person.png' width='16' height='16' alt='person' /></span> Users</a>
</li> <li> <a href="/bin/view/Main/WikiGroups"> <span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/group.png' width='16' height='16' alt='group' /></span> Groups</a>
</li> <li> <a href="/bin/view/System/WebTopicList"> <span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/index.png' width='16' height='16' alt='index' /></span> Index</a>
</li> <li> <a href="/bin/view/System/WebSearch"> <span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/searchtopic.png' width='16' height='16' alt='searchtopic' /></span> Search</a>
</li> <li> <a href="/bin/view/System/WebChanges"> <span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/changes.png' width='16' height='16' alt='changes' /></span> Changes</a>
</li> <li> <a href="/bin/view/System/WebNotify"> <span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/notify.png' width='16' height='16' alt='notify' /></span> Notifications</a>
</li> <li> <a href="/bin/view/System/WebRss"> <span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/feed.png' width='16' height='16' alt='feed' /></span> RSS Feed</a> 
</li> <li> <a href="/bin/view/System/WebPreferences"> <span class='foswikiIcon'><img src='/pub/System/DocumentGraphics/wrench.png' width='16' height='16' alt='wrench' /></span> Preferences</a>
</li></ul> 
<p></p>
 <ul>
<li> <b>User Reference</b>
</li> <li> <a href="/bin/view/System/BeginnersStartHere">BeginnersStartHere</a>
</li> <li> <a href="/bin/view/System/EditingShorthand">EditingShorthand</a>
</li> <li> <a href="/bin/view/System/Macros">Macros</a>
</li> <li> <a href="/bin/view/System/MacrosQuickReference">MacrosQuickReference</a>
</li> <li> <a href="/bin/view/System/FormattedSearch">FormattedSearch</a>
</li> <li> <a href="/bin/view/System/QuerySearch">QuerySearch</a>
</li> <li> <a href="/bin/view/System/DocumentGraphics">DocumentGraphics</a>
</li> <li> <a href="/bin/view/System/SkinBrowser">SkinBrowser</a>
</li> <li> <a href="/bin/view/System/InstalledPlugins">InstalledPlugins</a>
</li></ul> 
<p></p>
 <ul>
<li> <b>Admin Maintenance</b>
</li> <li> <a href="/bin/view/System/ReferenceManual">Reference Manual</a>
</li> <li> <a href="/bin/view/System/AdminToolsCategory">AdminToolsCategory</a>
</li> <li> <a href="/bin/view/System/InterWikis">InterWikis</a>
</li> <li> <a href="/bin/view/System/ManagingWebs">ManagingWebs</a>
</li> <li> <a href="/bin/view/System/SiteTools">SiteTools</a>
</li> <li> <a href="/bin/view/System/DefaultPreferences">DefaultPreferences</a>
</li> <li> <a href="/bin/view/System/WebPreferences">WebPreferences</a>
</li></ul> 
<p></p>
 <ul>
<li> <b>Categories</b>
</li> <li> <a href="/bin/view/System/AdminDocumentationCategory">AdminDocumentationCategory</a>
</li> <li> <a href="/bin/view/System/AdminToolsCategory">AdminToolsCategory</a>
</li> <li> <a href="/bin/view/System/DeveloperDocumentationCategory">DeveloperDocumentationCategory</a>
</li> <li> <a href="/bin/view/System/UserDocumentationCategory">UserDocumentationCategory</a>
</li> <li> <a href="/bin/view/System/UserToolsCategory">UserToolsCategory</a>
</li></ul> 
<p class='p'></p>

<p class='p'></p>
 <ul>
<li> <strong>Webs</strong>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/About/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#efefef" />&nbsp;About</a></span>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/Applications/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#EDBC18" />&nbsp;Applications</a></span>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/Applications/ClassificationApp/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#EDBC18" />&nbsp;<span class='foswikiWebIndent'></span>ClassificationApp</a></span>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/Development/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#efefef" />&nbsp;Development</a></span>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/Documentation/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#efefef" />&nbsp;Documentation</a></span>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/Download/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#dedede" />&nbsp;Download</a></span>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/Examples/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#efefef" />&nbsp;Examples</a></span>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/Home/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#efefef" />&nbsp;Home</a></span>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/Installation/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#cdcdcd" />&nbsp;Installation</a></span>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/Main/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#FFEFA6" />&nbsp;Main</a></span>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/References/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#efefef" />&nbsp;References</a></span>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/Sandbox/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#FFD8AA" />&nbsp;Sandbox</a></span>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/System/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#B9DAFF" />&nbsp;System</a></span>
</li> <li> <span style="white-space:nowrap"><a href="/bin/view/Usage/WebHome"><img src="https://damask.mpie.de/pub/System/DocumentGraphics/web-bg.png" border="0" alt="" width="16" height="16" style="background-color:#efefef" />&nbsp;Usage</a></span>
</li></ul> 
<p></p>

</div></div>
</div>
</div></div><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="patternWebBottomBar"><span class="foswikiRight"> <a href="http://foswiki.org/"><img src="/pub/System/ProjectLogos/foswiki-badge.png" height="42" alt="This site is powered by Foswiki" title="This site is powered by Foswiki" /></a></span>Copyright &copy; by the contributing authors. All material on this site is the property of the contributing authors. <br /> Ideas, requests, problems regarding DAMASK? <a href='mailto:damask@mpie.de?subject=DAMASK%20Feedback%20on%20System.PerlDoc'>Send feedback</a> </div></div></div>
</div>
</div>
</div>
</div></body></html>