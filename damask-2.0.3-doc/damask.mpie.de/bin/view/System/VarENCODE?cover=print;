<!DOCTYPE html><html lang="en">
<head>
<title> VarENCODE &lt; System &lt; DAMASK</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.5, user-scalable=yes" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<link rel="icon" href="/pub/System/ProjectLogos/favicon-damask.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/pub/System/ProjectLogos/favicon-damask.ico" type="image/x-icon" />
<link rel="alternate" href="https://damask.mpie.de/bin/edit/System/VarENCODE?t=1627674901" type="application/x-wiki" title="edit VarENCODE" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<meta name="robots" content="noindex" />
<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/System/WebRss" />
<base href="https://damask.mpie.de/bin/view/System/VarENCODE" /><!--[if IE]></base><![endif]-->
<link rel='stylesheet' href='/pub/System/PageOptimizerPlugin/cache/5438ade97a623d8de4941cc494b49ac6.css' class='CLASSIFICATIONPLUGIN::CSS JQUERYPLUGIN::BOOKMAKER JQUERYPLUGIN::BUTTON JQUERYPLUGIN::COMMENT JQUERYPLUGIN::TABLESORTER SMILIESPLUGIN head' media='all' />

<style class='head TABLEPLUGIN_default' type="text/css" media="all">
body .foswikiTable {border-width:1px}
body .foswikiTable .tableSortIcon img {padding-left:.3em; vertical-align:text-bottom}
body .foswikiTable td {border-style:solid none; vertical-align:top}
body .foswikiTable th {border-style:none solid; vertical-align:top; background-color:#d6d3cf; color:#000000}
body .foswikiTable th a:link {color:#000000}
body .foswikiTable th a:visited {color:#000000}
body .foswikiTable th a:hover {color:#000000; background-color:#d6d3cf}
body .foswikiTable th.foswikiSortedCol {background-color:#c4c1ba}
body .foswikiTable tr.foswikiTableRowdataBg0 td {background-color:#ffffff}
body .foswikiTable tr.foswikiTableRowdataBg0 td.foswikiSortedCol {background-color:#f7f7f6}
body .foswikiTable tr.foswikiTableRowdataBg1 td {background-color:#f7f7f6}
body .foswikiTable tr.foswikiTableRowdataBg1 td.foswikiSortedCol {background-color:#f0f0ee}
</style>

<style class='head EXTERNALLINKPLUGIN_CSS' type="text/css" media="all">
.externalLink a:link,
.externalLink a:visited,
.externalLink a:hover {
	background-image:url(/pub/System/ExternalLinkPlugin/diagonal.gif);
	background-repeat:no-repeat;
	background-position:right;
	padding-right:18px;
}
</style>

<style type="text/css" media="all">
		  /* Styles that are set using variables */
		  .patternWebIndicator,
		  .patternWebIndicator a {
					 background-color:none;
		  }
		  #patternTopBarContents { background-image:url(https://damask.mpie.de/pub/System/ProjectLogos/DAMASK.png); background-repeat:repeat-x;}

.patternBookView {
	border-color:#B9DAFF;
}
.patternPreviewPage #patternMain {
	/* uncomment to set the preview image */
	/*background-image:url("/pub/System/PreviewBackground/preview2bg.gif");*/
}
</style>

<script class='script JQUERYPLUGIN' src='/pub/System/JQueryPlugin/jquery-2.2.4.js'></script>
<script class='script JavascriptFiles/strikeone' type="text/javascript" src="/pub/System/JavascriptFiles/strikeone.js"></script>
<script class='script JQUERYPLUGIN::BROWSER' src='/pub/System/JQueryPlugin/plugins/browser/jquery.browser.js?version=0.1.0'></script>
<script class='script JQUERYPLUGIN::MIGRATE' src='/pub/System/JQueryPlugin/plugins/migrate/jquery.migrate.js?version=3.2.1'></script>
<script class='script JQUERYPLUGIN::LIVEQUERY' src='/pub/System/JQueryPlugin/plugins/livequery/jquery.livequery.js?version=1.3.6'></script>
<script class='script JQUERYPLUGIN::FOSWIKI' src='/pub/System/JQueryPlugin/plugins/foswiki/jquery.foswiki.js?version=2.14'></script>
<script class='script JavascriptFiles/foswikiString' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiString.js"></script>
<script class='script JavascriptFiles/foswikiForm' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiForm.js"></script>
<script class='script JQUERYPLUGIN::TABLESORTER' src='/pub/System/JQTablePlugin/jquery.tablesorter.js?version=2.0.3'></script>
<script class='script JQUERYPLUGIN::TABLESORTER' src='/pub/System/JQTablePlugin/tables.js?version=2.0.3'></script>
<script class='script JQUERYPLUGIN::BOOKMAKER' src='/pub/System/BookmakerPlugin/bookmaker.js?version=1.1.0'></script>
<script class='script JQUERYPLUGIN::METADATA' src='/pub/System/JQueryPlugin/plugins/metadata/jquery.metadata.js?version=2.1ef2bb44c86f5d0e98d55'></script>
<script class='script JavascriptFiles/foswikiPref' type="text/javascript" src="/pub/System/JavascriptFiles/foswikiPref.js"></script>
<script class='script PatternSkin/pattern' type="text/javascript" src="/pub/System/PatternSkin/pattern.js"></script>
<script class='script JQUERYPLUGIN::FOSWIKI::PREFERENCES foswikiPreferences' type='text/json'>{
   "SERVERTIME" : "30 Jul 2021 - 21:55",
   "WEB" : "System",
   "SCRIPTURL" : "https://damask.mpie.de/bin",
   "URLHOST" : "https://damask.mpie.de",
   "PUBURLPATH" : "/pub",
   "WIKIUSERNAME" : "Main.WikiGuest",
   "USERSWEB" : "Main",
   "TOPIC" : "VarENCODE",
   "SCRIPTURLPATH" : "/bin",
   "SYSTEMWEB" : "System",
   "USERNAME" : "guest",
   "SCRIPTSUFFIX" : "",
   "NAMEFILTER" : "[\\\\\\s*?~^$@%`\"'&|<:;>\\[\\]#\\x00-\\x1f]",
   "SCRIPTURLPATHS" : {
      "view" : "/bin/view"
   },
   "PUBURL" : "https://damask.mpie.de/pub",
   "COOKIEREALM" : "",
   "SKIN" : "damask,famfamfam,pattern",
   "WIKINAME" : "WikiGuest"
}
</script>
<script class='script JQUERYPLUGIN::UPLOADER::META foswikiPreferences' type='text/json'>{"TopicInteractionPlugin":{"attachFileSizeLimit":"262144","officeSuite":""}}</script>
<script class='script JQUERYPLUGIN::BUTTON' src='/pub/System/JQueryPlugin/plugins/button/jquery.button.init.js?version=2.0'></script>
<script class='script JQUERYPLUGIN::JEDITABLE' src='/pub/System/JEditableContrib/jquery.jeditable.js?version=06 Feb 2017'></script>
<script class='script JQTABLEPLUGIN::SORT' type='text/javascript'>
jQuery.extend(foswiki.preferences, {
  'JQTablePlugin.sort' : 'all'
});
</script>
<script class='script JQUERYPLUGIN::CHILI' src='/pub/System/JQueryPlugin/plugins/chili/jquery.chili.js?version=2.2_1'></script>
<script class='script JQUERYPLUGIN::CHILI' src='/pub/System/JQueryPlugin/plugins/chili/jquery.chili.init.js?version=2.2_1'></script>
<script class='script JQUERYPLUGIN::COMMENT' src='/pub/System/CommentPlugin/comment.js?version=3.0'></script>

<link rel="stylesheet" href="https://damask.mpie.de/pub/x3dom-1.7.1/x3dom.css">
<script src="https://damask.mpie.de/pub/x3dom-1.7.1/x3dom.js"></script>
</head> 
<body class="foswikiNoJs patternViewPage patternPrintPage"><div id="bookmaker">
  <img src='/pub/System/FamFamFamSilkIcons/book_open.png' class='foswikiIcon jqIcon book_open'  alt='book_open' /> Bookmaker for <a href="/bin/view/Sandbox/ExampleBook">ExampleBook</a>
  <table width="100%" cellpadding="0" cellspacing="0" style="min-height: 25px">
	 <tr>
		<td align="left" width="5%">
	<a id='bookmaker_change' class='jqButton ' href='#' title='Open a different book' ><span class='jqButtonText'>Change book</span></a>
	<div id="new_book" style="display:none">
	  <form method="POST" action="/bin/view/System/VarENCODE" onsubmit="StrikeOne.submit(this)"><input type='hidden' name='validation_key' value='?3753488c6898cec4059198cb80181710' />
	    <input type="text" id="book_title" name="open_bookmaker" title="Enter the web.topic name of the book topic, and hit Enter" value="Sandbox.ExampleBook" />
	  </form>
	</div>
		 </td>
		<td align="left">
	<a id='bookmaker_close' class='jqButton ' href='/bin/view/System/VarENCODE?close_bookmaker=1' title='Close the bookmaker interface' ><span class='jqButtonText'>Close bookmaker</span></a>
		</td>
		<td align="right">
	<form method="POST" onsubmit="StrikeOne.submit(this)"><input type='hidden' name='validation_key' value='?f1e1b8cffb75a43ee4570db51b75c48c' />
	  <a id='bookmaker_add_button' class='jqButton bookmaker_button bookmaker_action bookmaker_active' href='https://damask.mpie.de/bin/rest/BookmakerPlugin/add?topic=System.VarENCODE' title='Add the current topic to the book' ><span class='jqButtonText'>Add to book</span></a>
	  <a id='bookmaker_remove_button' class='jqButton bookmaker_button bookmaker_action ' href='https://damask.mpie.de/bin/rest/BookmakerPlugin/remove?topic=System.VarENCODE' title='Remove the current topic from the book' ><span class='jqButtonText'>Remove from book</span></a>
	</form>
		</td>
		<td>
	<form method="GET">
	  <a class="bookmaker_button" id="bookmaker_expand" href="https://damask.mpie.de/bin/rest/BookmakerPlugin/list" title="Click to expand the book">
	  <img src='/pub/System/FamFamFamSilkIcons/application_side_expand.png' class='foswikiIcon jqIcon application_side_expand'  alt='application_side_expand' /></a>
	</form>
		</td>
	 </tr>
  </table>
  <div id="bookmaker_more">
	 <em>You can change the order/nesting of topics using drag and drop</em> <br />
	 <a id="bookmaker_contract"><img src='/pub/System/FamFamFamSilkIcons/application_side_contract.png' class='foswikiIcon jqIcon application_side_contract'  alt='application_side_contract' /></a>
	 <div id="book_tree">
	 </div>
  </div>
</div>
<span id="PageTop"></span><div class="foswikiPage"><div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternOuter" class="clear">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternMainContents">
<div class="patternContent"><div class="foswikiTopic"> <h1 id="ENCODE_45_45_encode_characters_in_a_string">  ENCODE -- encode characters in a string </h1>
Encode character sequences in <code>"string"</code>, by mapping characters (or sequences of characters) to an alternative character (or sequence of characters). This macro can be used to encode strings for use in URLs, to encode to HTML entities, to protect quotes, and for as many other uses as you can imagine.
<h2 id="Parameters">  Parameters </h2>
           <table class="foswikiTable" id="tableVarENCODE1" rules="none">     
	<thead>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<th class="foswikiTableCol0 foswikiFirstCol"> Parameter </th>
			<th class="foswikiTableCol1"> Description </th>
			<th class="foswikiTableCol2 foswikiLastCol"> Default </th>
		</tr>
	</thead>     
	<tbody>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>"string"</code> </td>
			<td class="foswikiTableCol1"> String to encode </td>
			<td class="foswikiTableCol2 foswikiLastCol"> "" (empty string) </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>type</code> </td>
			<td class="foswikiTableCol1"> Use a predefined encoding (see below). </td>
			<td class="foswikiTableCol2 foswikiLastCol"> Default is 'url'. Parameter <code>type</code> not be used if <code>old</code> or <code>new</code> are given. </td>
		</tr>
		<tr class="foswikiTableEven foswikiTableRowdataBgSorted0 foswikiTableRowdataBg0">
			<td class="foswikiTableCol0 foswikiFirstCol"> <code>old</code> </td>
			<td class="foswikiTableCol1"> Comma-separated list of tokens to replace. Tokens are normally single characters, but can also be sequences of characters. The standard <a href="/bin/view/System/FormatTokens">FormatTokens</a> may be used in this list. Each token must be unique - you cannot list the same token twice. </td>
			<td class="foswikiTableCol2 foswikiLastCol"> May not be used with <code>type</code>; required if <code>new</code> is used </td>
		</tr>
		<tr class="foswikiTableOdd foswikiTableRowdataBgSorted1 foswikiTableRowdataBg1">
			<td class="foswikiTableCol0 foswikiFirstCol foswikiLast"> <code>new</code> </td>
			<td class="foswikiTableCol1 foswikiLast"> comma-separated list of replacement tokens. The elements in this list match 1:1 with the elements in the <code>old</code> list. Again, the standard <a href="/bin/view/System/FormatTokens">FormatTokens</a> may be used. An empty element in the <code>new</code> list will result in the corresponding token in the <code>old</code> list being deleted from the string. If the <code>new</code> list is shorter than the <code>old</code> list it will be extended to the same length using the empty element. Tokens do not have to be unique. <div class="foswikiHelp"><img src="/pub/System/DocumentGraphics/warning.png" alt="ALERT!" title="ALERT!" width="16" height="16" /> When using <code>old</code> and <code>new</code>, be aware that the results of applying earlier tokens are not processed again using later tokens. (see examples below)</div> </td>
			<td class="foswikiTableCol2 foswikiLastCol foswikiLast"> May not be used with <code>type</code>; required if <code>old</code> is used </td>
		</tr>
	</tbody>     </table>
If <code>ENCODE</code> is called with no optional parameters (e.g. <code>%ENCODE{"string"}%</code>) then the default <code>type="url"</code> encoding will be used.
<h2 id="Predefined_encodings">  Predefined encodings </h2>
Unless otherwise specified, the <code>type</code> parameter encodes the following "special characters" <ul>
<li> <code>type="entity"</code> or <code>type="entities"</code> Encode special characters into HTML entities, like a double quote into &#38;#34; <ul>
<li> all non-printable ASCII characters below space, except newline (<code>"\n"</code>) and carriage return (<code>"\r"</code>).
</li> <li> HTML special characters <code>"&lt;"</code>, <code>"&gt;"</code>, <code>"&amp;"</code>, single quote (<code>'</code>) and double quote (<code>"</code>)
</li> <li> TML special characters <code>"%"</code>, <code>"["</code>, <code>"]"</code>, <code>"@"</code>, <code>"_"</code>, <code>"*"</code>, <code>"="</code>, <code>"$"</code> and <code>"|"</code>
</li></ul> 
</li> <li> <code>type="html"</code> As <code>type="entity"</code> except it also encodes <code>\n</code> (newline) and carriage return (<code>"\r"</code>).
</li> <li> <code>type="safe"</code> Encode just the characters <code>'"&lt;&gt;%</code> into HTML entities.
</li> <li> <code>type="quote"</code> or <code>type="quotes"</code> Escapes double quotes with backslashes (<code>\"</code>), does not change any other characters
</li> <li> <code><b>type="url"</b></code> (default) Encode special characters for use in URL parameters, like a double quote into <code>%22</code>.
</li></ul> 
<h1 id="Examples">  Examples </h1> <ul>
<li> <code>%ENCODE{"spaced name"}%</code> expands to spaced%20name
</li> <li> <code>%ENCODE{"| Blah | | More blah |" old="|,$n" new="&amp;#124;,&lt;br /&gt;"}% expands to =&#124; Blah &#124; &#124; More blah &#124;</code>      - this encoding is useful to protect special TML characters in tables.
</li> <li> <code>%ENCODE{"10xx1x01x" old="1,x,0" new="A,,B"}%</code> expands to <code>ABABA</code>
</li> <li> <code>%ENCODE{"1,2" old="$comma" new=";"}%</code> expands to <code>1;2</code>
</li></ul> 
Values for HTML input fields must be entity encoded. <br /> Example: <pre class="tml">&lt;input type="text" name="address" value="%ENCODE{ "any text" type="entity" }%" /&gt;</pre>
<code>ENCODE</code> can be used to filter user input from URL parameters and similar to help protect against cross-site scripting. The safest approach is to use <code>type="entity"</code>. This can however prevent an application from fully working. You can alternatively use <code>type="safe"</code> which encodes only the characters <code>'"&lt;&gt;%</code> into HTML entities. When <code>ENCODE</code> is passing a string inside another macro always use double quotes ("") type="quote". For maximum protection against cross-site scripting you are advised to install the <a class="interwikiLink" href="https://foswiki.org/Extensions.SafeWikiPlugin" title="'Extensions.SafeWikiPlugin' on foswiki.org">Foswiki:Extensions.SafeWikiPlugin</a>.
<p></p>

Double quotes in strings must be escaped when passed into other macros.<br /> Example: <pre class="tml">&#37;SEARCH{ &#34;&#37;ENCODE{ &#34;string with &#34;quotes&#34;&#34; type&#61;&#34;quotes&#34; }&#37;&#34; noheader&#61;&#34;on&#34; }&#37;</pre>
<p></p>

<div class="foswikiHelp"><img src="/pub/System/DocumentGraphics/warning.png" alt="ALERT!" title="ALERT!" width="16" height="16" /> When using <code>old</code> and <code>new</code>, be aware that the results of applying earlier tokens are not processed again using later tokens. For example:<pre class="tml">
   &#37;ENCODE{&#34;A&#34; old&#61;&#34;A,B&#34; new&#61;&#34;B,C&#34;}&#37; will result in &#39;B&#39; (not &#39;C&#39;),
   &#37;ENCODE{&#34;asd&#34; old&#61;&#34;as,d&#34; new&#61;&#34;d,f&#34;}&#37; will yield &#39;df&#39;, and
   &#37;ENCODE{&#34;A&#34; old&#61;&#34;A,AA&#34; new&#61;&#34;AA,B&#34;}&#37; will give &#39;AA&#39; and.
   &#37;ENCODE{&#34;asdf&#34; old&#61;&#34;a,asdf&#34; new&#61;&#34;a,2&#34;}&#37; will give &#39;asdf&#39;</pre></div>
<p></p>

<h2 id="Related">  Related </h2>
 <a href="/bin/view/System/VarURLPARAM">URLPARAM</a></div>
<p class='p'></p>

</div>
<div class="patternInfo">This topic: System<span class='foswikiSeparator'>&nbsp;&gt;&nbsp;</span><a href="/bin/view/System/Category">Category</a> &gt; <a href="/bin/view/System/UserDocumentationCategory">UserDocumentationCategory</a> &gt; <a href="/bin/view/System/Macros">Macros</a><span class='foswikiSeparator'>&nbsp;&gt;&nbsp;</span>VarENCODE <br />
Topic revision:  <span class='patternRevInfo'>03 Feb 2016, <a href="/bin/view/Main/UnknownUser">UnknownUser</a></span></div>
</div>
</div>
</div>
</div><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="patternWebBottomBar"><span class="foswikiRight"> <a href="http://foswiki.org/"><img src="/pub/System/ProjectLogos/foswiki-badge.png" height="42" alt="This site is powered by Foswiki" title="This site is powered by Foswiki" /></a></span>Copyright &copy; by the contributing authors. All material on this site is the property of the contributing authors. <br /> Ideas, requests, problems regarding DAMASK? <a href='mailto:damask@mpie.de?subject=DAMASK%20Feedback%20on%20System.VarENCODE'>Send feedback</a> </div></div></div>
</div>
</div>
</div>
</div></body></html>