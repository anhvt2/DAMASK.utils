!function(n){var i="jqTwisty",s={openText:null,closeText:null,openImg:null,closeImg:null,initialState:"close",target:null};function e(t,e){var o=this;o.element=n(t),o._name=i,o._defaults=s,o.options=n.extend({},s,o.element.data(),e),3==t.childNodes[0].nodeType&&(o.options.openText=o.options.openText||o.element.text()),o.options.closeText=o.options.closeText||o.options.openText,o.options.closeImg=o.options.closeImg||o.options.openImg,o.init()}e.prototype.init=function(){var t=this;t.target=t.options.target?n(t.options.target):t.element.next(),t.target.addClass("jqTwistyContainer"),t.setState(t.options.initialState,!0),t.element.click(function(){return"open"===t.state?t.setState("close"):t.setState("open"),!1}),t.element.hover(function(){t.element.addClass("jqTwistyHover")},function(){t.element.removeClass("jqTwistyHover")}),t.element.bind("close.twisty",function(){t.close()}),t.element.bind("open.twisty",function(){t.open()}),t.element.trigger("inited.twisty")},e.prototype.setState=function(t,e){var o=this;"open"===t&&(o.state=t),"close"===t&&(o.state=t),"open"===o.state?o.open(e):o.close(e)},e.prototype.open=function(t){var e=this,o="";e.state="open",e.options.openImg&&(o='<img src="'+e.options.openImg+'" /> '),e.options.closeText&&(o+=e.options.closeText),o&&e.element.html(o),t?(e.target.show(),e.element.removeClass("jqTwistyClosed")):e.openAnimation()},e.prototype.close=function(t){var e=this,o="";e.state="close",e.options.closeImg&&(o='<img src="'+e.options.closeImg+'" /> '),e.options.openText&&(o+=e.options.openText),o&&e.element.html(o),t?(e.target.hide(),e.element.addClass("jqTwistyClosed")):e.closeAnimation()},e.prototype.openAnimation=function(){var t=this;return t.element.trigger("beforeOpen.twisty"),t.target.animate({height:"show",opacity:"show"},"fast",t.options.easing,function(){t.element.removeClass("jqTwistyClosed"),t.element.trigger("afterOpen.twisty")})},e.prototype.closeAnimation=function(){var t=this;return t.element.trigger("beforeClose.twisty"),t.target.animate({height:"hide",opacity:"hide"},"fast",t.options.easing,function(){t.element.addClass("jqTwistyClosed"),t.element.trigger("afterClose.twisty")})},e.prototype.state="close",n.fn[i]=function(t){return this.each(function(){n.data(this,"plugin_"+i)||n.data(this,"plugin_"+i,new e(this,t))})},n(".jqTwisty").livequery(function(){n(this).addClass("jqTwistyInited").jqTwisty()})}(jQuery);
