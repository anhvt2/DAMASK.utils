!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(o,n){function s(e,n,t,u){return!(e.selector!=n.selector||e.context!=n.context||t&&t.$lqguid!=n.fn.$lqguid||u&&u.$lqguid!=n.fn2.$lqguid)}o.extend(o.fn,{livequery:function(t,u){var r,i=this;return o.each(f.queries,function(e,n){if(s(i,n,t,u))return(r=n)&&!1}),(r=r||new f(i.selector,i.context,t,u)).stopped=!1,r.run(),i},expire:function(t,u){var r=this;return o.each(f.queries,function(e,n){s(r,n,t,u)&&!r.stopped&&f.stop(n.id)}),r}});var f=o.livequery=function(e,n,t,u){var r=this;return r.selector=e,r.context=n,r.fn=t,r.fn2=u,r.elements=o([]),r.stopped=!1,r.id=f.queries.push(r)-1,t.$lqguid=t.$lqguid||f.guid++,u&&(u.$lqguid=u.$lqguid||f.guid++),r};f.prototype={stop:function(){var e=this;e.stopped||(e.fn2&&e.elements.each(e.fn2),e.elements=o([]),e.stopped=!0)},run:function(){var e=this;if(!e.stopped){var n=e.elements,t=o(e.selector,e.context),u=t.not(n),r=n.not(t);e.elements=t,u.each(e.fn),e.fn2&&r.each(e.fn2)}}},o.extend(f,{guid:0,queries:[],queue:[],running:!1,timeout:null,registered:[],checkQueue:function(){if(f.running&&f.queue.length)for(var e=f.queue.length;e--;)f.queries[f.queue.shift()].run()},pause:function(){f.running=!1},play:function(){f.running=!0,f.run()},registerPlugin:function(){o.each(arguments,function(e,n){if(o.fn[n]&&!(0<o.inArray(n,f.registered))){var t=o.fn[n];o.fn[n]=function(){var e=t.apply(this,arguments);return f.run(),e},f.registered.push(n)}})},run:function(e){e!==n?o.inArray(e,f.queue)<0&&f.queue.push(e):o.each(f.queries,function(e){o.inArray(e,f.queue)<0&&f.queue.push(e)}),f.timeout&&clearTimeout(f.timeout),f.timeout=setTimeout(f.checkQueue,20)},stop:function(e){e!==n?f.queries[e].stop():o.each(f.queries,f.prototype.stop)}}),f.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html","prop","removeProp"),o(function(){f.play()})});
