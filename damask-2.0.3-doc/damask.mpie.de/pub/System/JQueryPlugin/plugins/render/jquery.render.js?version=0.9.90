!function(t,n){var e=n.jQuery;"object"==typeof exports?module.exports=e?t(n,e):function(e){if(e&&!e.fn)throw"Provide jQuery or null";return t(n,e)}:"function"==typeof define&&define.amd?define(function(){return t(n)}):t(n,!1)}(function(u,x){"use strict";var e=!1===x;x=x&&x.fn?x:u.jQuery;var t,i,K,p,_,b,F,d,P,c,O,I,U,q,o,s,B,L,a,l,n,h,r="v0.9.90",f="_ocp",Q=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,g=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,J=/[ \t]*(\r\n|\n|\r)/g,H=/\\(['"])/g,v=/['"\\]/g,D=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,Z=/^if\s/,m=/<(\w+)[>\s]/,w=/[\x00`><\"'&=]/,z=/^on[A-Z]|^convert(Back)?$/,G=/^\#\d+_`[\s\S]*\/\d+_`$/,y=/[\x00`><"'&=]/g,k=0,C={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},W="html",T="object",j="data-jsv-tmpl",A="jsvTmpl",R="For #index in nested block use #getIndex().",V={},$=u.jsrender,E=$&&x&&!x.render,M={template:{compile:function r(i,e,o,s){function t(e){var t,n;if(""+e===e||0<e.nodeType&&(a=e)){if(!a)if(/^\.\/[^\\:*?"<>]*$/.test(e))(n=d[i=i||e])?e=n:a=document.getElementById(e);else if(x.fn&&!I.rTmpl.test(e))try{a=x(e,document)[0]}catch(e){}a&&(s?e=a.innerHTML:((t=a.getAttribute(j))&&(t!==A?(e=d[t],delete d[t]):x.fn&&(e=x.data(a)[A])),t&&e||(i=i||(x.fn?A:e),e=r(i,a.innerHTML,o,s)),e.tmplName=i=i||t,i!==A&&(d[i]=e),a.setAttribute(j,i),x.fn&&x.data(a,A,e))),a=void 0}else e.fn||(e=void 0);return e}var a,n,l=e=e||"";I._html=P.html;0===s&&(s=void 0,l=t(l));s=s||(e.markup?e:{});s.tmplName=i;o&&(s._parentTmpl=o);!l&&e.markup&&(l=t(e.markup))&&l.fn&&(l=l.markup);if(void 0!==l)return l.fn||e.fn?l.fn&&(n=l):(e=de(l,s),me(l.replace(v,"\\$&"),e)),n||function(e){var t,n,r;for(t in M)e[n=t+"s"]&&(r=e[n],e[n]={},p[n](r,e))}(n=ne(function(){return n.render.apply(n,arguments)},e)),n}},tag:{compile:function(e,t,n){t.bindTo;var r,i,o,s=new I._tg;function a(){this._={unlinked:!0},this.inline=!0,this.tagName=e}b(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t});if(i=t.baseTag)for(o in t.flow=!!t.flow,t.baseTag=i=""+i===i?n&&n.tags[i]||O[i]:i,s=ne(s,i),t)s[o]=S(i[o],t[o]);else s=ne(s,t);void 0!==(r=s.template)&&(s.template=""+r===r?d[r]||d(r):r);(a.prototype=s).constructor=s._ctr=a,n&&(s._parentTmpl=n);return s}},viewModel:{compile:function(s,e){var r,t,d=this,u=e.getters,n=e.extend,c=e.id,i=x.extend({_is:s||"unnamed",unmap:w,merge:m},n),o="",a="",p=u?u.length:0,f=x.observable,g={};function l(e){t.apply(this,e)}function h(){return new l(arguments)}function v(e,t){for(var n,r,i,o,s,a,l=0;l<p;l++)i=u[l],n=void 0,i+""!==i&&(i=(n=i).getter),void 0===(o=e[i])&&n&&void 0!==(r=n.defaultVal)&&(a=e,o=b(s=r)?s.call(a):s),t(o,n&&d[n.type],i)}function m(e){e=e+""===e?JSON.parse(e):e;var t,n,r,i,o,s,a,l,d,u=0,p=this;if(F(p)){for(a={},d=[],n=e.length,r=p.length;u<n;u++){for(l=e[u],s=!1,t=0;t<r&&!s;t++)a[t]||(o=p[t],c&&(a[t]=s=c+""===c?l[c]&&(g[c]?o[c]():o[c])===l[c]:c(o,l)));s?(o.merge(l),d.push(o)):d.push(h.map(l))}f?f(p).refresh(d,!0):p.splice.apply(p,[0,p.length].concat(d))}else for(i in v(e,function(e,t,n){t?p[n]().merge(e):p[n](e)}),e)i===_||g[i]||(p[i]=e[i])}function w(){var e,t,n,r,i=0,o=this;if(F(o))return le(o);for(e={};i<p;i++)t=u[i],n=void 0,t+""!==t&&(t=(n=t).getter),r=o[t](),e[t]=n&&r&&d[n.type]?F(r)?le(r):r.unmap():r;for(t in o)"_is"===t||g[t]||t===_||"_"===t.charAt(0)&&g[t.slice(1)]||b(o[t])||(e[t]=o[t]);return e}for(l.prototype=i,r=0;r<p;r++)!function(t){t=t.getter||t,g[t]=r+1;var n="_"+t;o+=(o?",":"")+t,a+="this."+n+" = "+t+";\n",i[t]=i[t]||function(e){if(!arguments.length)return this[n];f?f(this).setProperty(t,e):this[n]=e},f&&(i[t].set=i[t].set||function(e){this[n]=e})}(u[r]);return((t=new Function(o,a.slice(0,-1))).prototype=i).constructor=t,h.map=function(e){e=e+""===e?JSON.parse(e):e;var t,n,r=0,i=e,o=[];if(F(e)){for(t=(e=e||[]).length;r<t;r++)o.push(this.map(e[r]));return o._is=s,o.unmap=w,o.merge=m,o}if(e)for(n in v(e,function(e,t){t&&(e=t.map(e)),o.push(e)}),i=this.apply(this,o),e)n===_||g[n]||(i[n]=e[n]);return i},h.getters=u,h.extend=n,h.id=c,h}},helper:{},converter:{}};function N(n,r){return function(){var e,t=this.base;return this.base=n,e=r.apply(this,arguments),this.base=t,e}}function S(e,t){return b(t)&&((t=N(e?e._d?e:N(ee,e):ee,t))._d=1),t}function X(e,t){var n,r=t.props;for(n in r)!z.test(n)||e[n]&&e[n].fix||(e[n]="convert"!==n?S(e.constructor.prototype[n],r[n]):r[n])}function Y(e){return e}function ee(){return""}function te(e){this.name=(x.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function ne(e,t){if(e){for(var n in t)e[n]=t[n];return e}}function re(){var e=this.get("item");return e?e.index:void 0}function ie(){return this.index}function oe(e,t,n){var r,i,o,s,a=this,l=!h&&void 0!==t,d=a.ctx;if(e in d||e in(d=c)){if(o=d&&d[e],"tag"===e||"root"===e||"parentTags"===e||a._.it===e)return o}else d=void 0;if((!o||!b(o)&&a.linked||a.tagCtx)&&(o&&o._cxp||(d!==c&&(d=(a=a.tagCtx?a:!(a=a.scope||a).isTop&&a.ctx.tag||a)._ocps,o=d&&d[e]||o),o&&o._cxp||!n&&!l||(o=I._crcp(e,o,a,d))),s=o&&o._cxp)){if(l)return I._ucp(e,t,a,s);if(n)return(i=o[1]?I._ceo(o[1].deps):[f]).unshift(o[0]),i._cxp=s,i;o=o[1]?s.tag&&s.tag.cvtArgs?s.tag.cvtArgs(!0,s.tagElse)[s.ind]:o[1](o[0].data,o[0],I):o[0]._ocp}return o&&b(o)&&(ne(r=function(){return o.apply(this&&this!==u?this:a,arguments)},o),r._vw=a),r||o}function se(e,t){return(e=e[+t===t?"args":"props"])&&e[t]}function ae(e,t,n,r,i,o,s,a){var l,d,u,p=this,c="array"===t;p.content=a,p.views=c?[]:{},p.data=r,p.tmpl=i,u=p._={key:0,useKey:c?0:1,id:""+k++,onRender:s,bnds:{}},p.linked=!!s,p.type=t||"top",(p.parent=n)?(p.root=n.root||p,l=n.views,d=n._,p.isTop=d.scp,p.scope=(!e.tag||e.tag===n.ctx.tag)&&!p.isTop&&n.scope||p,d.useKey?((l[u.key="_"+d.useKey++]=p).index=R,p.getIndex=re):l.length===(u.key=p.index=o)?l.push(p):l.splice(o,0,p),p.ctx=e||n.ctx):p.ctx=e||{}}function le(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n].unmap());return t}function de(e,t){var n,r=q._wm||{},i=ne({tmpls:[],links:{},bnds:[],_is:"template",render:fe},t);return i.markup=e,t.htmlTag||(n=m.exec(e),i.htmlTag=n?n[1].toLowerCase():""),(n=r[i.htmlTag])&&n!==r.div&&(i.markup=x.trim(i.markup)),i}function ue(l,d){var u=l+"s";p[u]=function e(t,n,r){var i,o,s,a=I.onStore[l];if(t&&typeof t===T&&!t.nodeType&&!t.markup&&!t.getTgt&&!("viewModel"===l&&t.getters||t.extend)){for(o in t)e(o,t[o],n);return n||p}return void 0===n&&(n=t,t=void 0),t&&""+t!==t&&(r=n,n=t,t=void 0),s=r?"viewModel"===l?r:r[u]=r[u]||{}:e,i=d.compile,null===n?t&&delete s[t]:(i&&((n=i.call(s,t,n,r,0)||{})._is=l),t&&(s[t]=n)),a&&a(t,n,r,i),n}}function pe(t){o[t]=function(e){return arguments.length?(U[t]=e,o):U[t]}}function ce(n){return b(n)&&(n={getTgt:n}),n.baseMap&&(n=ne(ne({},n.baseMap),n)),n.map=function(e,t){return new function(e,t){this.tgt=n.getTgt(e,t)}(e,t)},n}function fe(e,t,n,r,i,o){var s,a,l,d,u,p,c,f=r,g="";if(!0===t?(n=t,t=void 0):typeof t!==T&&(t=void 0),(l=this.tag)?(this,d=(f=f||this.view).getTmpl(l.template||this.tmpl),arguments.length||(e=f)):d=this,d){if(!r&&e&&"view"===e._is&&(f=e),f&&e===f&&(e=f.data),u=!f,h=h||u,f||((t=t||{}).root=e),!h||q.useViews||d.useViews||f&&f!==K)g=ge(d,e,t,n,f,i,o,l);else{if(f?(p=f.data,c=f.index,f.index=R):(p=(f=K).data,f.data=e,f.ctx=t),F(e)&&!n)for(s=0,a=e.length;s<a;s++)f.index=s,f.data=e[s],g+=d.fn(e[s],f,I);else f.data=e,g+=d.fn(e,f,I);f.data=p,f.index=c}u&&(h=void 0)}return g}function ge(e,t,n,r,i,o,s,a){function l(e){(x=ne({},n))[w]=e}var d,u,p,c,f,g,h,v,m,w,x,_,b="";if(a&&(m=a.tagName,_=a.tagCtx,n=n?ke(n,a.ctx):a.ctx,e===i.content?h=e!==i.ctx._wrp?i.ctx._wrp:void 0:e!==_.content?e===a.template?(h=_.tmpl,n._wrp=_.content):h=_.content||i.content:h=i.content,!1===_.props.link&&((n=n||{}).link=!1),(w=_.props.itemVar)&&("~"!==w.charAt(0)&&ve("Use itemVar='~myItem'"),w=w.slice(1))),i&&(s=s||i._.onRender,n=ke(n,i.ctx)),!0===o&&(g=!0,o=0),s&&(n&&!1===n.link||a&&a._.noVws)&&(s=void 0),!0===(v=s)&&(v=void 0,s=i._.onRender),n=e.helpers?ke(e.helpers,n):n,x=n,F(t)&&!r)for(p=g?i:void 0!==o&&i||new ae(n,"array",i,t,e,o,s,h),i&&i._.useKey&&(p._.bnd=!a||a._.bnd&&a),d=0,u=t.length;d<u;d++)w&&l(t[d]),(c=new ae(x,"item",p,t[d],e,(o||0)+d,s,p.content))._.it=w,f=e.fn(t[d],c,I),b+=p._.onRender?p._.onRender(f,c):f;else w&&l(t),(p=g?i:new ae(x,m||"data",i,t,e,o,s,h))._.it=w,b+=e.fn(t,p,I);return a&&(p.tag=a,p.tagElse=_.index,_.contentView=p),v?v(b,p):b}function he(e){throw new I.Err(e)}function ve(e){he("Syntax error\n"+e)}function me(k,C,T,j,A){function R(e){(e-=N)&&F.push(k.substr(N,e).replace(J,"\\n"))}function V(e,t){e&&(e+="}}",ve((t?"{{"+t+"}} block has {{/"+e+" without {{"+e:"Unmatched or missing {{/"+e)+", in template:\n"+k))}var e,t,$,E,n,M=U.allowCode||C&&C.allowCode||!0===o.allowCode,r=[],N=0,S=[],F=r,P=[,,r];if(M&&C._is&&(C.allowCode=M),T&&(void 0!==j&&(k=k.slice(0,-j.length-2)+L),k=s+k+a),V(S[0]&&S[0][2].pop()[0]),k.replace(i,function(e,t,n,r,i,o,s,a,l,d,u,p){(s&&t||l&&!n||a&&":"===a.slice(-1)||d)&&ve(e),o&&(i=":",r=W);var c,f=(t||T)&&[[]],g="",h="",v="",m="",w="",x="",_="",b="",y=!(l=l||T&&!A)&&!i;n=n||(a=a||"#data",i),R(p),N=p+e.length,s?M&&F.push(["*","\n"+a.replace(/^:/,"ret+= ").replace(H,"$1")+";\n"]):n?("else"===n&&(Z.test(a)&&ve('for "{{else if expr}}" use "{{else expr}}"'),f=P[8]&&[[]],P[9]=k.substring(P[9],p),P=S.pop(),F=P[2],y=!0),a&&be(a.replace(J," "),f,C).replace(D,function(e,t,n,r,i,o,s,a){return r="'"+i+"':",s?(h+=o+",",m+="'"+a+"',"):n?(v+=r+"j._cp("+o+',"'+a+'",view),',x+=r+"'"+a+"',"):t?_+=o:("trigger"===i&&(b+=o),"lateRender"===i&&(c=a),g+=r+o+",",w+=r+"'"+a+"',",E=E||z.test(i)),""}).slice(0,-1),f&&f[0]&&f.pop(),$=[n,r||!!j||E||"",y&&[],xe(m||(":"===n?"'#data',":""),w,x),xe(h||(":"===n?"data,":""),g,v),_,b,c,f||0],F.push($),y&&(S.push(P),(P=$)[9]=N)):u&&(V(u!==P[0]&&"else"!==P[0]&&u,P[0]),P[9]=k.substring(P[9],p),P=S.pop()),V(!P&&u),F=P[2]}),R(k.length),(N=r[r.length-1])&&V(""+N!==N&&+N[9]===N[9]&&N[0]),T){for(t=ye(r,k,T),n=[],e=r.length;e--;)n.unshift(r[e][8]);we(t,n)}else t=ye(r,C);return t}function we(e,t){var n,r,i=0,o=t.length;for(e.deps=[],e.paths=[];i<o;i++)for(n in e.paths.push(r=t[i]),r)"_jsvto"!==n&&r.hasOwnProperty(n)&&r[n].length&&!r[n].skp&&(e.deps=e.deps.concat(r[n]))}function xe(e,t,n){return[e.slice(0,-1),t.slice(0,-1),n.slice(0,-1)]}function _e(e,t){return"\n\t"+(t?t+":{":"")+"args:["+e[0]+"]"+(e[1]||!t?",\n\tprops:{"+e[1]+"}":"")+(e[2]?",\n\tctx:{"+e[2]+"}":"")}function be(j,A,R){var V,$,E,M,N,S=A&&A[0],F={bd:S},P={0:F},I=0,O=(R?R.links:S&&(S.links=S.links||{}))||K.tmpl.links,U=0,q={},J={},e=(j+(R?" ":"")).replace(g,function(e,t,n,r,d,i,o,s,a,l,u,p,c,f,g,h,v,m,w,x){r&&!s&&(d=r+d),i=i||"",n=n||t||p,d=d||a;var _,b,y,k,C,T=")";if("["===(l=l||v||"")&&(l="[j._sq(",T=")]"),!o||N||M){if(S&&h&&!N&&!M&&(!V||E||$)&&(_=J[U-1],x.length-1>w-(_||0))){if(_=x.slice(_,w+e.length),!0!==b)if(y=$||P[U-1].bd,(k=y[y.length-1])&&k.prm){for(;k.sb&&k.sb.prm;)k=k.sb;C=k.sb={path:k.sb,bnd:k.bnd}}else y.push(C={path:y.pop()});(b=O[h=B+":"+_+" onerror=''"+L])||(O[h]=!0,O[h]=b=me(h,R,!0)),!0!==b&&C&&(C._cpfn=b,C.prm=F.bd,C.bnd=C.bnd||C.path&&0<=C.path.indexOf("^"))}return N?(N=!c)?e:p+'"':M?(M=!f)?e:p+'"':(n?(J[U]=w++,F=P[++U]={bd:[]},n):"")+(m?U?"":(I=x.slice(I,w),(V?(V=E=$=!1,"\b"):"\b,")+I+(I=w+e.length,S&&A.push(F.bd=[]),"\b")):s?(U&&ve(j),S&&A.pop(),V=d,E=r,I=w+e.length,S&&((S=F.bd=A[V]=[]).skp=!r),d+":"):d?d.split("^").join(".").replace(Q,function(e,t,n,r,i,o,s,a){var l="."===n;if(n&&(d=d.slice(t.length),/^\.?constructor$/.test(a||d)&&ve(e),l||(e=(r?'view.ctxPrm("'+r+'")':i?"view":"data")+(a?(o?"."+o:r?"":i?"":"."+n)+(s||""):(a=r?"":i?o||"":n,"")),e=t+("view.data"===(e+=a?"."+a:"").slice(0,9)?e.slice(5):e)),S)){if(y="linkTo"===V?$=A._jsvto=A._jsvto||[]:F.bd,k=l&&y[y.length-1]){if(k._cpfn){for(;k.sb;)k=k.sb;k.bnd&&(d="^"+d.slice(1)),k.sb=d,k.bnd=k.bnd||"^"===d.charAt(0)}}else y.push(d);J[U]=w+(l?1:0)}return e})+(l?(F=P[++U]={bd:[]},q[U]=T,l):i):i||(g?(g=q[U]||g,q[U]=!1,F=P[--U],g+(l?(F=P[++U],q[U]=T,l):"")):u?(q[U]||ve(j),","):t?"":(N=c,M=f,'"')))}ve(j)});return!U&&e||ve(j)}function ye(e,t,n){var r,i,o,s,a,l,d,u,p,c,f,g,h,v,m,w,x,_,b,y,k,C,T,j,A,R,V,$,E,M,N=0,S=q.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,F="",P={},I=e.length;for(""+t===t?(x=n?'data-link="'+t.replace(J," ").slice(1,-1)+'"':t,t=0):(x=t.tmplName||"unnamed",t.allowCode&&(P.allowCode=!0),t.debug&&(P.debug=!0),c=t.bnds,w=t.tmpls),r=0;r<I;r++)if(""+(i=e[r])===i)F+='\n+"'+i+'"';else if("*"===(o=i[0]))F+=";\n"+i[1]+"\nret=ret";else{if(s=i[1],y=!n&&i[2],a=_e(i[3],"params")+"},"+_e(g=i[4]),E=i[6],M=i[7],k=i[9]&&i[9].replace(H,"$1"),(j="else"===o)?f&&f.push(i[8]):(V=i[5]||!1!==U.debugMode&&"undefined",c&&(f=i[8])&&(f=[f],N=c.push(1))),S=S||g[1]||g[2]||f||/view.(?!index)/.test(g[0]),(A=":"===o)?s&&(o=s===W?">":s+o):(y&&((_=de(k,P)).tmplName=x+"/"+o,_.useViews=_.useViews||S,ye(y,_),S=_.useViews,w.push(_)),j||(b=o,S=S||o&&(!O[o]||!O[o].flow),T=F,F=""),C=(C=e[r+1])&&"else"===C[0]),$=V?";\ntry{\nret+=":"\n+",v=h="",A&&(f||E||s&&s!==W||M)){if((R=new Function("data,view,j,u","// "+x+" "+ ++N+" "+o+"\nreturn {"+a+"};"))._er=V,R._tag=o,R._bd=!!f,R._lr=M,n)return R;we(R,f),p=!0,h=(m='c("'+s+'",view,')+N+",",v=")"}if(F+=A?(n?(V?"try{\n":"")+"return ":$)+(p?(p=void 0,S=u=!0,m+(R?(c[N-1]=R,N):"{"+a+"}")+")"):">"===o?(d=!0,"h("+g[0]+")"):(!0,"((v="+g[0]+")!=null?v:"+(n?"null)":'"")'))):(l=!0,"\n{view:view,tmpl:"+(y?w.length:"0")+","+a+"},"),b&&!C){if(F="["+F.slice(0,-1)+"]",m='t("'+b+'",view,this,',n||f){if((F=new Function("data,view,j,u"," // "+x+" "+N+" "+b+"\nreturn "+F+";"))._er=V,F._tag=b,f&&we(c[N-1]=F,f),F._lr=M,n)return F;h=m+N+",undefined,",v=")"}F=T+$+m+(F.deps&&N||F)+")",b=f=0}V&&!C&&(S=!0,F+=";\n}catch(e){ret"+(n?"urn ":"+=")+h+"j._err(e,view,"+V+")"+v+";}"+(n?"":"ret=ret"))}F="// "+x+"\nvar v"+(l?",t=j._tag":"")+(u?",c=j._cnvt":"")+(d?",h=j._html":"")+(n?";\n":',ret=""\n')+(P.debug?"debugger;":"")+F+(n?"\n":";\nreturn ret;");try{F=new Function("data,view,j,u",F)}catch(e){ve("Compiled template code:\n\n"+F+'\n: "'+(e.message||e)+'"')}return t&&(t.fn=F,t.useViews=!!S),F}function ke(e,t){return e&&e!==t?t?ne(ne({},t),e):e:t&&ne({},t)}function Ce(e){return C[e]||(C[e]="&#"+e.charCodeAt(0)+";")}function Te(e,t,n){var r=this.jquery&&(this[0]||he("Unknown template")),i=r.getAttribute(j);return fe.call(i&&x.data(r)[A]||d(r),e,t,n)}function je(e){return null!=e?w.test(e)&&(""+e).replace(y,Ce)||e:""}if(p={jsviews:r,sub:{View:ae,Err:te,tmplFn:me,parse:be,extend:ne,extendCtx:ke,syntaxErr:ve,onStore:{template:function(e,t){null===t?delete V[e]:V[e]=t}},addSetting:pe,settings:{allowCode:!1},advSet:ee,_ths:X,_gm:S,_tg:function(){},_cnvt:function(e,t,n,r){var i,o,s,a,l="number"==typeof n&&t.tmpl.bnds[n-1],d=t.linkCtx;void 0===r&&l&&l._lr&&(r="");void 0!==r?n=r={props:{},args:[r]}:l&&(n=l(t.data,t,I));if(l=l._bd&&l,o=n.args[0],e||l){if(i=d&&d.tag,n.view=t,!i){if(i=ne(new I._tg,{_:{bnd:l,unlinked:!0},inline:!d,tagName:":",convert:e,flow:!0,tagCtx:n}),1<(s=n.args.length))for(a=i.bindTo=[];s--;)a.unshift(s);d&&((d.tag=i).linkCtx=d),n.ctx=ke(n.ctx,(d?d.view:t).ctx),X(i,n)}i._er=r&&o,i.ctx=n.ctx||i.ctx||{},n.ctx=void 0,o=i.cvtArgs()[0]}return null!=(o=l&&t._.onRender?t._.onRender(o,t,i):o)?o:""},_tag:function(e,t,n,r,i,o){function s(e){var t;(t=a[e])&&(a[e]=t=F(t)?t:[t],R!==t.length&&he(e+" length not same as bindTo "))}var a,l,d,u,p,c,f,g,h,v,m,w,x,_,b,y,k,C,T,j,A,R,V=0,$="",E=(t=t||K).linkCtx||0,M=t.ctx,N=n||t.tmpl,S="number"==typeof r&&t.tmpl.bnds[r-1];"tag"===e._is?(e=(a=e).tagName,r=a.tagCtxs,a.template):(l=t.getRsc("tags",e)||he("Unknown tag: {{"+e+"}} "),l.template);void 0===o&&S&&(S._lr=(l.lateRender||S._lr)&&"false"!==S._lr)&&(o="");void 0!==o?($+=o,r=o=[{props:{},args:[],params:{}}]):S&&(r=S(t.data,t,I));for(c=r.length;V<c;V++)h=r[V],x=h.tmpl,(!E||!E.tag||V&&!E.tag.inline||a._er||x&&+x===x)&&(x&&N.tmpls&&(h.tmpl=h.content=N.tmpls[x-1]),h.index=V,h.render=fe,h.view=t,h.ctx=ke(h.ctx,M)),(n=h.props.tmpl)&&(h.tmpl=t.getTmpl(n),h.content=h.content||h.tmpl),a||(a=new l._ctr,_=!!a.init,a.parent=p=M&&M.tag,a.tagCtxs=r,T=a.dataMap,E&&(a.inline=!1,(E.tag=a).linkCtx=E),(a._.bnd=S||E.fn)?a._.arrVws={}:a.dataBoundOnly&&he(e+" must be data-bound:\n{^{"+e+"}}")),r=a.tagCtxs,T=a.dataMap,h.tag=a,T&&r&&(h.map=r[V].map),a.flow||(v=h.ctx=h.ctx||{},d=a.parents=v.parentTags=M&&ke(v.parentTags,M.parentTags)||{},p&&(d[p.tagName]=p),d[a.tagName]=v.tag=a);if(!(a._er=o)){for(X(a,r[0]),a.rendering={},V=0;V<c;V++){if(h=a.tagCtx=r[V],C=h.props,a.ctx=h.ctx,!V){if(_&&(a.init(h,E,a.ctx),_=void 0),h.args.length||!1===a.argDefault||(h.args=k=[h.view.data],h.params.args=["#data"]),void 0!==(w=a.bindTo))for(w=a.bindTo=F(w)?w:[w],f=w.length;f--;)A=w[f],isNaN(parseInt(A))||(A=parseInt(A)),w[f]=A;w=a.bindTo||[0],R=w.length,a._.bnd&&(s("linkedElement"),s("linkedCtxParam")),E&&(E.attr=a.attr=E.attr||a.attr),u=a.attr,a._.noVws=u&&u!==W}if(k=a.cvtArgs(void 0,V),a.linkedCtxParam)for(f=R;f--;)(m=a.linkedCtxParam[f])&&(A=w[f],h.ctx[m]=I._cp(se(h,A),se(h.params,A),h.view,a._.bnd&&{tag:a,ind:f,tagElse:V}));(b=C.dataMap||T)&&(k.length||C.dataMap)&&((y=h.map)&&y.src===k[0]&&!i||(y&&y.src&&y.unmap(),y=h.map=b.map(k[0],C,void 0,!a._.bnd)),k=[y.tgt]),g=void 0,a.render&&(g=a.render.apply(a,k),t.linked&&g&&!G.test(g)&&((n={links:[]}).render=n.fn=function(){return g},g=ge(n,t.data,void 0,!0,t,void 0,void 0,a))),k.length||(k=[t]),void 0===g&&(j=k[0],a.contentCtx&&(j=!0===a.contentCtx?t:a.contentCtx(j)),g=h.render(j,!0)||(i?void 0:"")),$=$?$+(g||""):g}a.rendering=void 0}a.tagCtx=r[0],a.ctx=a.tagCtx.ctx,a._.noVws&&a.inline&&($="text"===u?P.html($):"");return S&&t._.onRender?t._.onRender($,t,a):$},_er:he,_err:function(e,t,n){var r=void 0!==n?b(n)?n.call(t.data,e,t):n||"":"{Error: "+(e.message||e)+"}";U.onError&&void 0!==(n=U.onError.call(t.data,e,n&&r,t))&&(r=n);return t&&!t.linkCtx?P.html(r):r},_cp:Y,_sq:function(e){return"constructor"===e&&ve(""),e}},settings:{delimiters:function e(t,n,r){if(!t)return U.delimiters;if(F(t))return e.apply(p,t);U.delimiters=[t,n,l=r?r.charAt(0):l];s=t.charAt(0);B=t.charAt(1);L=n.charAt(0);a=n.charAt(1);t="\\"+s+"(\\"+l+")?\\"+B;n="\\"+L+"\\"+a;i="(?:(\\w+(?=[\\/\\s\\"+L+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+L+"]|\\"+L+"(?!\\"+a+"))*?)";I.rTag="(?:"+i+")";i=new RegExp("(?:"+t+i+"(\\/)?|\\"+s+"(\\"+l+")?\\"+B+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+n,"g");I.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+t+".*"+n);return o},advanced:function(e){return e?(ne(q,e),I.advSet(),o):q}},map:ce},(te.prototype=new Error).constructor=te,re.depends=function(){return[this.get("item"),"index"]},ie.depends="index",ae.prototype={get:function(e,t){t||!0===e||(t=e,e=void 0);var n,r,i,o,s=this,a=!t||"root"===t;if(e){if(!(o=t&&s.type===t&&s))if(n=s.views,s._.useKey){for(r in n)if(o=t?n[r].get(e,t):n[r])break}else for(r=0,i=n.length;!o&&r<i;r++)o=t?n[r].get(e,t):n[r]}else if(a)o=s.root;else for(;s&&!o;)o=s.type===t?s:void 0,s=s.parent;return o},getIndex:ie,getRsc:function(e,t){var n,r,i=this;if(""+t===t){for(;void 0===n&&i;)n=(r=i.tmpl&&i.tmpl[e])&&r[t],i=i.parent;return n||p[e][t]}},getTmpl:function(e){return e&&(e.fn?e:this.getRsc("templates",e)||d(e))},ctxPrm:oe,_is:"view"},I=p.sub,o=p.settings,!($||x&&x.render)){for(t in M)ue(t,M[t]);for(n in P=p.converters,c=p.helpers,O=p.tags,I._tg.prototype={baseApply:function(e){return this.base.apply(this,e)},cvtArgs:function(e,t){var n,r,i,o,s,a,l,d=this;if(d.tagName?d=(a=d).tagCtxs?a.tagCtxs[t||0]:a.tagCtx:a=d.tag,s=a.bindTo,o=d.args,(l=a.convert)&&""+l===l&&(l="true"===l?void 0:d.view.getRsc("converters",l)||he("Unknown converter: '"+l+"'")),e&&e.length)o=e;else if(l&&!e&&(o=o.slice()),s){for(i=[],n=s.length;n--;)r=s[n],i.unshift(se(d,r));e&&(o=i)}if(l)if(n=(s=s||[0]).length,l=l.apply(a,i||o),F(l)&&l.length===n||(l=[l],s=[0],n=1),e)o=l;else for(;n--;)+(r=s[n])===r&&(o[r]=l[n]);return o},bndArgs:function(e){return this.cvtArgs(!0,e)},ctxPrm:oe},K=I.topView=new ae,x?(x.fn.render=Te,_=x.expando,x.observable&&(ne(I,x.views.sub),p.map=x.views.map)):(x={},e&&(u.jsrender=x),x.renderFile=x.__express=x.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},x.isFunction=function(e){return"function"==typeof e},x.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},I._jq=function(e){e!==x&&(ne(e,x),(x=e).fn.render=Te,delete x.jsrender,_=x.expando)},x.jsrender=r),(U=I.settings).allowCode=!1,b=x.isFunction,x.render=V,x.views=p,x.templates=d=p.templates,U)pe(n);(o.debugMode=function(e){return void 0===e?U.debugMode:(U.debugMode=e,U.onError=e+""===e?new Function("","return '"+e+"';"):b(e)?e:void 0,o)})(!1),q=U.advanced={useViews:!1,_jsv:!1},O({if:{render:function(e){var t=this.tagCtx;return this.rendering.done||!e&&(arguments.length||!t.index)?"":(this.rendering.done=!0,void(this.selected=t.index))},contentCtx:!0,flow:!0},for:{render:function(e){var t,n=!arguments.length,r=this.tagCtx,i="",o=0;return this.rendering.done||(void 0!==(t=n?r.view.data:e)&&(i+=r.render(t,n),o+=F(t)?t.length:1),(this.rendering.done=o)&&(this.selected=r.index)),i},flow:!0},props:{baseTag:"for",dataMap:ce(function(e){var t,n,r=[];if(typeof e===T)for(t in e)n=e[t],t!==_&&e.hasOwnProperty(t)&&!b(n)&&r.push({key:t,prop:n});return r}),flow:!0},include:{flow:!0},"*":{render:Y,flow:!0},":*":{render:Y,flow:!0},dbg:c.dbg=P.dbg=function(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}}),P({html:je,attr:je,url:function(e){return null!=e?encodeURI(""+e):null===e?e:""}})}return U=I.settings,F=(x||$).isArray,o.delimiters("{{","}}","^"),E&&$.views.sub._jq(x),x||$},window);
