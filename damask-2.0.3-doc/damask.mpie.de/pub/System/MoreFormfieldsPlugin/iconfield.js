"use strict";jQuery(function(a){var t={minimumInputLength:0,url:foswiki.getPreference("SCRIPTURL")+"/rest/MoreFormfieldsPlugin/icon",width:"element",multiple:!1,quietMillis:500,placeholder:"None",pageSize:20};function i(e,t){return void 0===e.id?e.text:e.url?'<img src="'+e.url+'" class="foswikiIcon" /> '+e.text:/^(\w+)\-/.exec(e.id)?'<i class="'+RegExp.$1+" fa-fw "+e.id+'"></i> '+e.text:e.text}a(".foswikiIconField:not(.foswikiIconFieldInited)").livequery(function(){var e=a(this),n=a.extend({},t,e.data()),l=e.val();e.addClass("foswikiIconFieldInited"),e.select2({allowClear:!0,placeholder:n.placeholder,minimumInputLength:n.minimumInputLength,width:n.width,multiple:n.multiple,formatSelection:i,formatResult:i,_escapeMarkup:function(e){return e},ajax:{url:n.url,dataType:"json",data:function(e,t){return{q:e,limit:n.pageSize,page:t,cat:n.cat,include:n.include,exclude:n.exclude}},results:function(e,t){return e.more=t*n.pageSize<e.total,e}},initSelection:function(e,t){var i;""!==l&&(i={q:l,limit:1,cat:n.cat,exact:1},a.ajax(n.url,{data:i,dataType:"json"}).done(function(e){void 0!==e.results&&t(e.results[0])}))}})})});
