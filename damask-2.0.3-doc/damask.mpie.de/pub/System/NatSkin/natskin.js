"use strict";!function(r){var e=0;function c(n){for(var e=5381,t=n.length;t;)e=33*e^n.charCodeAt(--t);return e>>>0}function t(){var n,e=r(".natTopPanel");r(window).on("scroll",function(){window.cancelAnimationFrame(n),n=window.requestAnimationFrame(function(){100<=r(window).scrollTop()?e.is(".open")?r(document).trigger("close_panel"):r("body").addClass("natBodyStickyTopBar"):r("body").removeClass("natBodyStickyTopBar")})})}r.extend(r.easing,{shagga:function(n,e,t,o,i){return(e/=i/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t}}),r(function(){var n=foswiki.getPreference("NatSkin");window.navigator.userAgent.match(/Android/i)&&window.scrollTo(0,1),n.initWebMenu&&(r(".natWebMenu").livequery(function(){var n,e,t,o,i,a,s=r(this),c=s.data();s.is(".natWebMenuStretch")&&(i=(t=100-((e=(n=s.find(".natWebMenuContents > ul > li")).length)-1)*(c.margin||0))-(o=t/e)*(e-1),o+="%",i+="%",n.width(o).last().width(i)),a=r("<select />").appendTo(this),r("<option />",{selected:"selected",value:"",text:"Go to..."}).appendTo(a),s.find(".natWebMenuContents > ul > li > a[href]").each(function(){var n=r(this);r("<option />",{value:n.attr("href"),text:n.text()}).appendTo(a)}),a.on("change",function(){window.location.href=r(this).find("option:selected").val()})}),r(".natWebMenuContents > ul").livequery(function(){r(this).addClass("sf-menu").superfish({cssArrows:!1,speed:200,onBeforeShow:function(){var n,e=r(this);e.is(".ajaxMenu")&&(n=r.extend({},e.metadata())).url&&e.load(n.url,function(){e.removeClass("ajaxMenu"),e.parent().removeClass("hasAjaxMenu")})}}).find("li:has(ul)").addClass("hasSubMenu").find("li:has(.ajaxMenu)").addClass("hasAjaxMenu")})),n.initBusyIndicator&&(r(document).ajaxSend(function(){0===r(".blockUI").length&&r(".natBusy").show()}),r(document).ajaxComplete(function(){r(".natBusy").hide()})),n.initOverflows&&function(){r(".natMainContents").find(".foswikiTable").not(r(".foswikiTable .foswikiTable",this)).wrap("<div class='overflow foswikiTableOverflow'></div>")}(),n.initSideBar&&(r(".natSideBar h2 + h2").livequery(function(){var n=r(this);n.replaceWith("<h3>"+n.html()+"</h3>")}),r(".natSideBarContents > h2:first-of-type").addClass("natFirstOfType")),n.initExternalLinks&&r(".natExternalLink").livequery(function(){r(this).attr("target","_blank").attr("rel","noopener noreferrer")}),n.initTopPanel&&function(){var e,t=r(".natTopPanel"),n=r(".natPanelToggle"),o=t.find(".natSearchBox .foswikiInputField"),i=t.find("form").attr("action"),a=r.extend({openDuration:200,openEasing:"shagga",closeDuration:200,closeEasing:"shagga"},t.data());function s(){void 0===e&&(e=window.setTimeout(function(){n.addClass("open"),e=void 0,t.slideDown({duration:a.openDuration,easing:a.openEasing,complete:function(){t.addClass("open")}}),window.scrollTo(0,0),o.focus()},250))}function c(){n.removeClass("open"),t.slideUp({duration:a.closeDuration,easing:a.closeEasing,complete:function(){t.removeClass("open")}})}r(document).on("dblclick",".natPanelToggleSearch",function(n){return window.clearTimeout(e),r(this).addClass("natWaiting"),window.location.href=i,n.preventDefault(),!1}),r(document).on("open_panel",s).on("close_panel",c).on("click",".natPanelToggle a",function(n){t.is(".open")?c():s()}).on("keydown",function(n){n.altKey&&n.shiftKey&&70===n.keyCode&&s()}),o.on("keydown",function(n){27===n.keyCode&&c()}).on("blur",function(){window.setTimeout(function(){c()},100)})}(),n.initTopBar&&t(),n.initCookieInfo&&r(".natCookieInfo").livequery(function(){var n=r(this),e="FOSWIKI_NATSKIN_cookieInfo",t=foswiki.getPreference("COOKIEREALM"),o=0===foswiki.getPreference("URLHOST").indexOf("https://");r.cookie(e)||(window.setTimeout(function(){n.fadeIn(200)},2e3),n.find(".natCookieInfoOK").click(function(){n.fadeOut(200),r.cookie(e,!0,{path:"/",domain:t,secure:o})}))}),r(document).on("dialogopen",function(){e++,r("body").addClass("natDialogOpen")}),r(document).on("dialogclose",function(){--e<=0&&r("body").removeClass("natDialogOpen")}),r(document).on("keydown",function(n){var t,o,i;n.altKey&&n.shiftKey&&219===n.keyCode&&(t="",o=[],i={},r("[accesskey]").each(function(){var n=r(this),e=n.attr("accesskey");void 0===i[e]&&(i[e]=n.attr("title")||"???",o.push(e))}),o.length&&(r(o.sort()).each(function(n,e){t+="<tr><th>"+e+":</th><td>"+i[e]+"</td></tr>"}),t="<table class='foswikiLayoutTable'><tbody>"+t+"</tbody></table>",r.pnotify({title:r.i18n("Access Keys"),text:t,type:"notice"})))}),function(){function n(){var n,e=window.location.hash.substring(1).replace(/([#\.])/g,"\\$1");if(""!==e&&!e.match(/^GoSlide\d/))try{(n=r("#"+e)).addClass("natBlinker"),window.setTimeout(function(){n.removeClass("natBlinker")},2500)}catch(n){return!1}return!0}r(window).on("hashchange",n),n()}(),r(document).on("click","a.natEditSettingsAction",function(){return r("#editSettingsForm").submit(),!1}),r(".natMoreActionsMenu:not(.natInitedMoreActionsMenu)").livequery(function(){var n=r(this),e=r.extend({menu:"ul:first"},n.data()),t=n.find(e.menu);n.hoverIntent({over:function(){t.fadeIn("fast")},out:function(){t.hide()},timeout:500,sensitivity:3}),n.find("a[href]").click(function(){t.hide()})}),r(window).scroll(function(){100<r(this).scrollTop()?r("a.natScrollTop").fadeIn(1e3):r("a.natScrollTop").fadeOut(100)}),function(){var n=r(".natSideBar");function e(){n.toggle("slide",{direction:"right",duration:200,easing:"shagga",complete:function(){r("body").toggleClass("natBodyNavToggleActive"),r("body").is(".natBodyNavToggleActive")||n.css("display","")}})}r(document).on("click",".natBodyNavToggleActive",function(){return e(),!0}),r(".natNavToggle").livequery(function(){r(this).on("click",function(){return e(),!1})})}(),r(".foswikiBroadcastMessage").livequery(function(){var n,e=r(this),t=e.attr("id"),o=(foswiki.getPreference("COOKIENAMEPREFIX")||"")+"FOSWIKI_NATSKIN_broadcastMessage_"+t,i=foswiki.getPreference("COOKIEREALM"),a=0===foswiki.getPreference("URLHOST").indexOf("https://"),s=parseInt(r.cookie(o),10);void 0===s?e.show():(n=c(e.text()))!==s&&e.show(),e.find(".foswikiBroadcastMessageClose").on("click",function(){return n=n||c(e.text()),e.slideUp("fast"),r.cookie(o,n,{path:"/",domain:i,secure:a}),!1})}),r("address").livequery(function(){var n=r(this),e=n.html().replace(/^\s+|\s+$/g,"");n.html(e)})})}(jQuery);
