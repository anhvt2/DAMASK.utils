"use strict";function JenFailsafe(){}function Jen(t){if(!(this instanceof Jen))return new Jen(t);this.hardened=!(!t||1!=t)&&t,this.dump=new Uint8Array(256),this.mode="",this.version="1.0.6-dev",1==_serverSide?(this.crypto=require("crypto"),this.mode="NodeJS CryptoAPI"):(this.crypto=window.crypto||window.msCrypto,window.crypto?(this.mode="W3C CryptoAPI",this.crypto=window.crypto):window.msCrypto&&(this.mode="Microsoft CryptoAPI",this.crypto=window.msCrypto),this.crypto||(this.mode="Failsafe",this.crypto=JenFailsafe))}var _serverSide=!1;JenFailsafe.getRandomValues=function(t){t instanceof Uint8Array||(t=new Uint8Array(256));for(var e=0,r=0;r<t.length;r++){for(;;)if((e=Math.round(256*Math.random()))>=0&&e<=255)break;t[r]=e}return t},Jen.prototype.engine=function(){return this.mode},Jen.prototype.fill=function(){1==_serverSide?this.dump=this.crypto.randomBytes(256):this.crypto.getRandomValues(this.dump)},Jen.prototype.randomBytes=function(t){if(t<=0&&(t=1),1==_serverSide)return this.crypto.randomBytes(t);var e=new Uint8Array(t);return this.crypto.getRandomValues(e),e},Jen.prototype.random=function(t){t<=0?t=4:t>2&&(t=4);var e=this.randomBytes(t);if(1==_serverSide)return 1==t?e.readUInt8(0):2==t?e.readUInt16LE(0):e.readUInt32LE(0);var r=new DataView(e.buffer);return 1==t?r.getUint8(0):2==t?r.getUint16(0):r.getUint32(0)},Jen.prototype.randomBetween=function(t,e){if(t<=0&&(t=Math.pow(2,32)),e||(e=0),e>=t)return NaN;var r=1,n=Math.log(t)/Math.log(2);n>16?r=4:n>8&&(r=2);var o;do{o=this.random(r)}while(o>t||o<e);return o},Jen.prototype.hardening=function(t){this.hardened=!!t},Jen.prototype.password=function(t,e,r){var n=(new Date).getTime();r instanceof RegExp||(r=null);var o=0,i="",a=e=e>(t=t<4?4:t)?e:t;if(t!=e){a=0;for(var s=Math.ceil(Math.log(e)/Math.log(2)),d=Math.ceil(s/8),h=8*d;0==a;){var p=this.random(d)>>h-s;if(p>=t&&p<=e){a=p;break}}}for(o=0;o<a;){this.fill();for(var f=this.dump,u=0;u<f.length&&o<a;u++)f[u]>=48&&f[u]<=57||f[u]>=65&&f[u]<=90||f[u]>=97&&f[u]<=122?r?r.test(String.fromCharCode(f[u]))&&(i+=String.fromCharCode(f[u]),o++):(i+=String.fromCharCode(f[u]),o++):1==this.hardened&&(33==f[u]||35==f[u]||37==f[u]||40==f[u]&&f[u]<=47||58==f[u]&&f[u]<=64)&&(r?r.test(String.fromCharCode(f[u]))&&(i+=String.fromCharCode(f[u]),o++):(i+=String.fromCharCode(f[u]),o++))}return this.fill(),this._time=(new Date).getTime()-n,i},Jen.prototype.stats=function(t,e,r){return this._time},"undefined"!=typeof module&&module.exports&&(_serverSide=!0,module.exports=Jen),jQuery(function(t){function e(t){var e=t.regex;return r=r||new Jen(t.specialChars),void 0===e&&(e="",t.capitals||(e+="A-Z"),t.numbers||(e+="\\d"),e&&(e=new RegExp("[^"+e+"]"))),r.password(t.length,t.length,e)}var r,n={length:15,capitals:!0,numbers:!0,specialChars:!0};t(document).on("click",".jqGeneratePassword",function(r){var o=t(this),i=t.extend({},n,o.data()),a=t(i.target),s=t("<span />");return a.replaceWith(s).attr("type","text").val(e(i)),s.replaceWith(a),r.preventDefault(),!1})});
